<html>
<head>
<title>How to handle click events on AR.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何处理AR.js上的点击事件</h1>
<blockquote>原文：<a href="https://medium.com/swlh/how-to-handle-click-events-on-ar-js-f397ea5994d?source=collection_archive---------2-----------------------#2019-05-11">https://medium.com/swlh/how-to-handle-click-events-on-ar-js-f397ea5994d?source=collection_archive---------2-----------------------#2019-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c932" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">更新版本——在网站上显示AR内容很好，但添加用户交互打开了一个全新的机会世界。</h2></div><p id="156c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是关于AR.js的系列文章的一部分，以下是迄今为止撰写的文章列表:</p><ul class=""><li id="4004" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc">ar . js——在网络上实现跨浏览器增强现实的最简单方式</a></li><li id="69be" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/how-to-deliver-ar-on-the-web-only-with-a-qr-code-139bb90e82f1">如何只用二维码在网上交付AR</a></li><li id="f4f4" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/how-to-handle-click-events-on-ar-js-f397ea5994d">如何处理AR.js上的点击事件</a></li><li id="3a32" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/10-tips-to-enhance-your-ar-js-app-8b44c6faffca">提高你的AR.js表现的10个技巧</a>。</li></ul><p id="1922" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于AR.js和Web AR的最新消息，可以<a class="ae kc" href="https://twitter.com/nicolocarp" rel="noopener ugc nofollow" target="_blank">关注</a>我！</p><blockquote class="ki kj kk"><p id="be3c" class="ix iy kl iz b ja jb ij jc jd je im jf km jh ji jj kn jl jm jn ko jp jq jr js hb bi translated">声明:AR.js v3已经发布，新的文档可以在<a class="ae kc" href="https://ar-js-org.github.io/AR.js-Docs/" rel="noopener ugc nofollow" target="_blank">https://ar-js-org.github.io/AR.js-Docs/</a>找到。如果您发现本教程有问题，可以在那里了解更多信息。</p></blockquote></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es kw"><img src="../Images/4ca24b6abc5ed2def8e981a564c7ac0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CbBzDWlSjcHH_XR0x_ETEw.png"/></div></div></figure><p id="a528" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在过去的文章<a class="ae kc" rel="noopener" href="/@nicolcarpignoli/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc">中，我写了关于AR.js </a>和<a class="ae kc" rel="noopener" href="/@nicolcarpignoli/how-to-deliver-ar-on-the-web-only-with-a-qr-code-139bb90e82f1">我们可以仅使用二维码</a>来交付AR内容的方式。但是如何与我们已经展示给用户的3D物体互动呢？这将为这项奇妙的技术打开一个新的应用世界。</p><p id="7718" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<a class="ae kc" href="https://github.com/jeromeetienne/AR.js/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> AR.js Github资源库</a>上的简短搜索显示了几个与事件相关的问题，其中大部分尚未解决。AR.js构建在<a class="ae kc" href="https://aframe.io/" rel="noopener ugc nofollow" target="_blank"> aframe </a>的顶部，不容易理解如何处理3D对象上的简单事件，即点击事件。</p><p id="7d27" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我试图收集我发现的所有工作提示，并把它们组织到这篇文章中，文章附有一个完整的用户交互点击的工作示例。</p><p id="9a8a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我们开始吧！</p><h2 id="94d1" class="li lj hi bd lk ll lm ln lo lp lq lr ls jg lt lu lv jk lw lx ly jo lz ma mb mc bi translated">创建HTML入口点</h2><p id="4f7d" class="pw-post-body-paragraph ix iy hi iz b ja md ij jc jd me im jf jg mf ji jj jk mg jm jn jo mh jq jr js hb bi translated">与往常一样，AR.js应用程序从一个定义标记、模型等的HTML文件开始。在这个文件中，为了处理事件，我们需要定义元素的附加属性。下面我们来详细看看。</p><figure class="kx ky kz la fd lb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ul class=""><li id="6104" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">在第11行，我们导入了一个用于设置事件处理程序的外部Javascript文件。稍后我们将详细了解它</li><li id="585b" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">在第21行，我们的标记被定义了附加属性:<code class="du mk ml mm mn b">markerhandler</code>被用作注册的组件名，而<code class="du mk ml mm mn b">emitevents</code>和<code class="du mk ml mm mn b">cursor</code>定义了发出事件的可能性，特别是基于鼠标/触摸的事件</li><li id="b8ad" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">定义一个<code class="du mk ml mm mn b">id</code>或者添加一个非常具体的CSS类是很重要的，以便以后检索我们的标记和实体元素。</li></ul><p id="5d8c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们看看我们的<code class="du mk ml mm mn b">events.js</code>文件看起来怎么样</p><figure class="kx ky kz la fd lb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="3f0c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">代码非常简单:我们注册我们的组件，在初始化时，我们通过“点击”添加一个事件监听器。</p><p id="4f21" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在第10行，我添加了一个额外的检查:事实上，如果没有这个检查，事件会触发多次，一次是标记事件，一次是实体事件。通过这种检查，我们只有在标记元素<code class="du mk ml mm mn b">cursorEl</code>可见并且是与事件相关联的元素时才响应事件。</p><p id="1a21" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请注意，这种方法并不完美，也不是“生产就绪”。</p><ul class=""><li id="2c98" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">点击/触摸在屏幕的中心非常明显，而在角落则不明显</li><li id="f1e1" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">点击不太靠谱。无论如何，它对于简单的交互非常有用，比如切换3D模型的点击或者开始视频的点击，或者类似的事情。</li></ul><p id="5624" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你必须让一个有点击功能的应用程序拥有核心功能，请注意这个限制。</p><p id="4376" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae kc" href="https://aframe.io/docs/0.9.0/components/cursor.html" rel="noopener ugc nofollow" target="_blank">这里【a-frame官方文档对处理3D模型上的点击的复杂性以及为什么实现这一点如此具有挑战性做了很好的解释。</a></p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><p id="20a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">无论如何，用这种方法你可以给你的AR.js应用添加基本的交互，大多数时候这就足够了！一旦进入事件监听器，你可以做任何你想做的事情；每次点击我都会让3D模型变大。你肯定可以做一些比这更有趣、更有用的事情:)</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><blockquote class="ki kj kk"><p id="6e6e" class="ix iy kl iz b ja jb ij jc jd je im jf km jh ji jj kn jl jm jn ko jp jq jr js hb bi translated"><strong class="iz mo"> <em class="hi"> Chialab </em> </strong> <em class="hi">是一家设计公司。通过开发战略、设计、软件和内容，我们在品牌和人之间建立了令人兴奋的关系。</em></p><p id="2071" class="ix iy kl iz b ja jb ij jc jd je im jf km jh ji jj kn jl jm jn ko jp jq jr js hb bi translated"><a class="ae kc" href="https://chialab.it" rel="noopener ugc nofollow" target="_blank"><em class="hi">https://www . chialab . I</em></a><em class="hi">t .</em></p></blockquote></div></div>    
</body>
</html>