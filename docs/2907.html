<html>
<head>
<title>AR.js — The Simplest Way to get Cross-Browser Augmented Reality on the Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ar . js——在网络上实现跨浏览器增强现实的最简单方式</h1>
<blockquote>原文：<a href="https://medium.com/swlh/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc?source=collection_archive---------0-----------------------#2019-05-11">https://medium.com/swlh/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc?source=collection_archive---------0-----------------------#2019-05-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2651" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">更新版本——如何以开源、简单和跨浏览器的方式在网络上交付增强现实内容。</h2></div><p id="7558" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是关于AR.js的系列文章的第一部分，下面是迄今为止所写文章的列表:</p><ul class=""><li id="4004" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/ar-js-the-simplest-way-to-get-cross-browser-augmented-reality-on-the-web-10cbc721debc">ar . js——在网络上实现跨浏览器增强现实的最简单方式</a></li><li id="69be" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/how-to-deliver-ar-on-the-web-only-with-a-qr-code-139bb90e82f1">如何只用二维码在网上交付AR</a></li><li id="f4f4" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/how-to-handle-click-events-on-ar-js-f397ea5994d">如何处理AR.js上的点击事件</a></li><li id="3c13" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated"><a class="ae kc" rel="noopener" href="/@nicolcarpignoli/10-tips-to-enhance-your-ar-js-app-8b44c6faffca">提高你的AR.js表现的10个技巧</a>。</li></ul><p id="1922" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于AR.js和Web AR的最新消息，可以<a class="ae kc" href="https://twitter.com/nicolocarp" rel="noopener ugc nofollow" target="_blank">关注</a>我！</p><blockquote class="ki kj kk"><p id="eb11" class="ix iy kl iz b ja jb ij jc jd je im jf km jh ji jj kn jl jm jn ko jp jq jr js hb bi translated">声明:AR.js v3已经发布，新的文档可以在<a class="ae kc" href="https://ar-js-org.github.io/AR.js-Docs/" rel="noopener ugc nofollow" target="_blank">https://ar-js-org.github.io/AR.js-Docs/</a>找到。如果您发现本教程有问题，可以在那里了解更多信息。</p></blockquote></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><h1 id="89d8" class="kw kx hi bd ky kz la lb lc ld le lf lg io lh ip li ir lj is lk iu ll iv lm ln bi translated">只是又一个AR库？</h1><p id="c700" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">对于那些还不知道的人来说，<a class="ae kc" href="https://github.com/jeromeetienne/AR.js" rel="noopener ugc nofollow" target="_blank"> AR.js </a>是一个伟大的项目，Github上有超过13k颗星星，这使得使用web技术开发增强现实应用程序变得简单而有趣。通过几行简单的Javascript和一些3D建模，开发一个增强现实网络应用几乎是立竿见影的。</p><p id="46c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它最有趣的特点是:</p><ul class=""><li id="0e99" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">性能，在我用了两年的手机上大约60 FPS(！)</li><li id="95bd" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">兼容性，它是跨浏览器的，它可以在支持<a class="ae kc" href="https://caniuse.com/#feat=webgl" rel="noopener ugc nofollow" target="_blank"> webgl </a>和<a class="ae kc" href="https://caniuse.com/#feat=stream" rel="noopener ugc nofollow" target="_blank"> webrtc </a>的所有手机浏览器(显然还有桌面)上工作(所以基本上所有Android手机和iOS 11以上的iphone)</li><li id="1a8a" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">简单，它是不同框架的包装器，使web AR开发非常容易。它建立在<a class="ae kc" href="https://aframe.io/docs/0.8.0/introduction/" rel="noopener ugc nofollow" target="_blank">人字架</a>和<a class="ae kc" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank"> three.js </a>之上。</li></ul><p id="8da1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以我们不需要Hololens、纸板或者昂贵的手机；我们只需要到达一个AR.js webapp，然后就可以体验AR了。</p><p id="0b86" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这怎么可能呢？好吧，事实证明AR.js可以使用标记(<a class="ae kc" rel="noopener" href="/arjs/ar-js-supports-tango-on-a-frame-too-2c098de4df34">不总是</a>，但是如果我们想要跨浏览器，我们必须使用标记)。</p><figure class="lu lv lw lx fd ly er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es lt"><img src="../Images/df6fcb5d448aa8268ac3d09bb4ab8f3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RuaXS9yOc5EgT1hZo20jXw.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">A default marker containing a qr-code on the left and AR.js magic on the right — image from <a class="ae kc" rel="noopener" href="/arjs/ar-code-a-fast-path-to-augmented-reality-60e51be3cbdf">this</a> Jerome Etienne’s story.</figcaption></figure><h1 id="efbe" class="kw kx hi bd ky kz mj lb lc ld mk lf lg io ml ip li ir mm is lk iu mn iv lm ln bi translated">标记</h1><p id="83a9" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">标记是一种简化的二维码。在AR.js上，我们为特定的标记定义了特定的3D场景，因此当相机识别出标记时，web应用程序会在其上显示3D模型。此外，标记可能包含qr码。</p><h2 id="d3ac" class="mo kx hi bd ky mp mq mr lc ms mt mu lg jg mv mw li jk mx my lk jo mz na lm nb bi translated">图案标记</h2><p id="5db0" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">AR.js的一个重要特性是可以使用自定义标记，默认类型是“模式”。我对图案标记的局限性做了一些研究，关于它们的大小和形状。我了解到:</p><ul class=""><li id="db18" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">标记的最大分辨率是16x16像素</li><li id="2068" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">它们的形状必须是方形的</li><li id="cb7f" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">它们不能有白色/透明区域，只能有浅灰色(例如#F0F0F0)</li><li id="6814" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">它们不能包含颜色，只能是黑色和浅灰色</li><li id="de09" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">它们必须包含简单的文本，比如一个字母、一个数字或一个符号。</li></ul><p id="c3ad" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以使用<a class="ae kc" href="https://jeromeetienne.github.io/AR.js/three.js/examples/marker-training/examples/generator.html" rel="noopener ugc nofollow" target="_blank">这个在线工具</a>来生成您的自定义标记。如果你分析一下”。patt”输出文件，你会发现给定的图像是用一组字符描述的。因此，为了获得好的结果，最好对不同的标记使用不同的图像，避免过于复杂的图像或包含文字的图像。</p><p id="68d3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个需要记住的重要方面是标记的“背景”和周围环境之间要有高对比度；例如，如果标记在黑色背景上具有浅灰色符号，那么如果标记被打印并放置在黑色桌子上或显示在黑色屏幕上，照相机将难以识别该标记。</p><h2 id="78fd" class="mo kx hi bd ky mp mq mr lc ms mt mu lg jg mv mw li jk mx my lk jo mz na lm nb bi translated">条形码标记</h2><p id="8dfc" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">标记也可以是条形码。他们将一个数字表示为一个符号，用矩阵上的微积分创建。建议基于具有高“汉明距离”的矩阵生成标记(见<a class="ae kc" href="https://github.com/artoolkit/artoolkit-docs/blob/master/3_Marker_Training/marker_barcode.md" rel="noopener ugc nofollow" target="_blank">此表</a>)，这样摄像机可以更好地识别它们。矩阵还定义了可能标记的最大数量(例如，“AR_MATRIX_CODE_3x3_PARITY65”矩阵可以生成32个不同的条形码标记)。</p><p id="a679" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请记住，如果可能的话，最好避免在条形码标记中使用白色/透明色(这一点在条形码标记上没有得到证实，但它是基于经验)。</p><p id="03c2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae kc" href="http://au.gmented.com/app/marker/marker.php" rel="noopener ugc nofollow" target="_blank">这个</a>是我在下面例子中使用的条形码标记的在线生成器。</p><p id="64c3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我将向您展示一些来自AR.js文档和博客的基本代码，以及一些变通方法，因为目前有一些关于自定义标记的公开问题。</p><figure class="lu lv lw lx fd ly"><div class="bz dy l di"><div class="nc nd l"/></div></figure><p id="7812" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这个简单的HTML中，我们:</p><ul class=""><li id="e49e" class="jt ju hi iz b ja jb jd je jg jv jk jw jo jx js jy jz ka kb bi translated">导入库</li><li id="7cec" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">告诉AR.js识别用3×3矩阵生成的条形码模式(第14行)</li><li id="6090" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">定义两个<a-marker>标签，每个标签由两个不同的条形码值(20和24)标识</a-marker></li><li id="ecde" class="jt ju hi iz b ja kd jd ke jg kf jk kg jo kh js jy jz ka kb bi translated">定义一个静态相机实体(第32行)。</li></ul><p id="c1e0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了避免问题，请使用如上所示的特定标签和属性。在撰写本文时(2019年4月),这个示例有效，它基于AR.js的最新版本(版本1.6.2)。还要求对模式资源使用远程URL，而不是相对URL。<strong class="iz ne">请注意，由于浏览器的安全限制，您的服务器必须通过https提供这些资源。</strong></p><p id="6450" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果要使用自定义标记而不是条形码标记，可以使用之前链接的工具生成它们，而不是使用</p><pre class="lu lv lw lx fd nf ng nh ni aw nj bi"><span id="23a8" class="mo kx hi ng b fi nk nl l nm nn">&lt;a-marker type="barcode" value="6" (...)</span></pre><p id="04ba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以用</p><pre class="lu lv lw lx fd nf ng nh ni aw nj bi"><span id="08c5" class="mo kx hi ng b fi nk nl l nm nn">&lt;a-marker type="pattern" preset="custom" url="...." (...)</span></pre><p id="c3fa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其中“url”是您的远程绝对URL。patt”文件，位于远程的某个地方(例如，在HTML文件的同一个存储库中)。</p><h2 id="a4d8" class="mo kx hi bd ky mp mq mr lc ms mt mu lg jg mv mw li jk mx my lk jo mz na lm nb bi translated">细节模式</h2><p id="309c" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">为了简化摄像机对标记的检测，记住一些创建条形码/图案标记的简单规则是很有用的。</p><p id="d50c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">例如，为“蓝色”图像和“红色”图像生成的图案非常相似(您可以在以下图像上检查它们)；这将使检测变得非常困难。</p><figure class="lu lv lw lx fd ly er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es no"><img src="../Images/3105845552e54328225cf37425f15a8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_Jb8ilbV1XRgKfBQP32WA.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">“Red” marker on the left and the correspondent pattern used by AR.js on the right.</figcaption></figure><figure class="lu lv lw lx fd ly er es paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="er es np"><img src="../Images/4f4070ffcc29537fb75499ad9678f0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V9R9scsefsR2e18g0JW6fw.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">“Blue” marker on the left and the correspondent pattern used by AR.js on the right.</figcaption></figure><p id="1813" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果图像非常复杂，检测也可能失败，因为输出看起来像一组随机字符。从我玩标记的一点点经验中，我发现条形码标记和图案标记一样容易识别。对于后者，可以进行更多的定制，但也更容易创建一组类似的标记，这些标记可能会混淆相机，或者使用复杂的图像作为标记。</p><h2 id="8fc3" class="mo kx hi bd ky mp mq mr lc ms mt mu lg jg mv mw li jk mx my lk jo mz na lm nb bi translated">那么，AR.js值得吗？</h2><p id="3432" class="pw-post-body-paragraph ix iy hi iz b ja lo ij jc jd lp im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">我回答“绝对”。它的简单令人惊叹。基于标记的方法并不是真正的限制，而是一种非常适合各种用例的范例。标记可以显示在手机和桌面显示器上，也可以打印出来挂在墙上或板上。</p><figure class="lu lv lw lx fd ly er es paragraph-image"><div class="er es nq"><img src="../Images/730c146942f76efac025132a08272878.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*A19L-zo3WbE1SwaniwrH_w.png"/></div><figcaption class="mf mg et er es mh mi bd b be z dx">Screenshot taken from my AR.js demo app, while the marker is shown on another display. The yellow 3D box pops up when the camera recognizes the correspondent pattern.</figcaption></figure><p id="bd80" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如AR.js向我们展示的那样，没有必要通过手机上的另一个设备来体验AR，也没有必要下载第三方应用程序(普通用户肯定会很快卸载，或者他们可能根本不会下载)。在网络上提供增强现实，并使它容易适合每个人(字面上！)是让这项技术普及的关键。</p></div><div class="ab cl kp kq gp kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="hb hc hd he hf"><p id="9d16" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">非常特别地感谢<a class="ae kc" href="https://twitter.com/xho" rel="noopener ugc nofollow" target="_blank"> xho </a>审阅了这篇文章，在他之前这篇文章不太可读:)</p><blockquote class="ki kj kk"><p id="a80c" class="ix iy kl iz b ja jb ij jc jd je im jf km jh ji jj kn jl jm jn ko jp jq jr js hb bi translated"><strong class="iz ne"> Chialab </strong>是一家设计公司。通过开发战略、设计、软件和内容，我们在品牌和人之间建立了令人兴奋的关系。<a class="ae kc" href="https://chialab.it" rel="noopener ugc nofollow" target="_blank"> https://www.chialab.i </a> t。</p></blockquote></div></div>    
</body>
</html>