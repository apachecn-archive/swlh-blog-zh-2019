<html>
<head>
<title>Get your Ruby-Sinatra App on Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Heroku上获取您的Ruby-Sinatra应用程序</h1>
<blockquote>原文：<a href="https://medium.com/swlh/get-your-ruby-sinatra-app-on-heroku-47f1436cbf52?source=collection_archive---------69-----------------------#2019-06-11">https://medium.com/swlh/get-your-ruby-sinatra-app-on-heroku-47f1436cbf52?source=collection_archive---------69-----------------------#2019-06-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4f44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在Heroku上找不到任何关于启动Ruby-Sinatra应用程序的清晰指南，所以我决定写一个。</p><p id="458a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你需要做的第一步是创建一个Heroku账户。这是相当直接的，所以我不会进入它。</p><p id="ed28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你这样做了，你会想进入命令行并安装一个bundler和heroku。首先是捆绑者:</p><p id="c024" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du jd je jf jg b">gem install bundler.</code></p><p id="a176" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后安装heroku:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="d836" class="jp jq hi jg b fi jr js l jt ju">brew install heroku/brew/heroku</span></pre><p id="b7b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，命令行会提示您登录Heroku。一旦你完成了，你应该创建一个新的Heroku库。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="b9fb" class="jp jq hi jg b fi jr js l jt ju">heroku create</span></pre><figure class="jh ji jj jk fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jv"><img src="../Images/445ce5c9a1036189c912a51039cf04db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_1yGQIZn48v_TaF13WnIQ.png"/></div></div></figure><p id="d21e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你的Heroku项目将被赋予一个随机的名字——Adj+geographic-Feature。如果你去&gt; &gt;<a class="ae kd" href="https://dashboard.heroku.com/apps" rel="noopener ugc nofollow" target="_blank">https://dashboard.heroku.com/apps</a>应该也能看到。</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es ke"><img src="../Images/3c3bd46880e0662b19cfab1b5b1b5464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*bXSravKKTybmcx0wDgZiyg.png"/></div></figure><p id="ded6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你已经设置好了，你需要在你的项目中添加几个文件来告诉Heroku如何运行它。您需要在命令行中接触3个新文件:config.ru | Procfile | Gemfile</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es kf"><img src="../Images/c38f2b0eac2964cdee97f736b19881e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*kPJvV34GK1c6tPkMS8dnRw.png"/></div></figure><p id="6952" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在我的gem文件中使用的唯一宝石是“pg”和“sinatra ”,所以我的gem文件看起来像这样。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="3f1d" class="jp jq hi jg b fi jr js l jt ju">source ‘https://rubygems.org'<br/>gem ‘sinatra’</span><span id="1a58" class="jp jq hi jg b fi kg js l jt ju">gem ‘pg’, ‘~&gt; 0.18’</span></pre><p id="ac41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">congfig.ru文件也很简单。看起来是这样的:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="5ad6" class="jp jq hi jg b fi jr js l jt ju">run Sinatra::Application</span></pre><p id="4844" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来是Procfile。这给了Heroku运行你的应用程序所需的命令。这应该包括您在命令行中键入的命令，以便在本地运行您的应用程序。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="b517" class="jp jq hi jg b fi jr js l jt ju">web: bundle exec ruby app.rb -p $PORT</span></pre><p id="637f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“app.rb”是我的主控制器文件，如果你的名字不是“app.rb ”,你需要修改它。</p><p id="d825" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">只差几步了。回到命令行，您需要进行捆绑安装来设置Gemfile.lock。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="ecd1" class="jp jq hi jg b fi jr js l jt ju">bundle install</span></pre><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es kh"><img src="../Images/35a800984ff1fb647a5a9b2be22b92d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*DvFafp1xA2PNEGZZwVHQOQ.png"/></div></figure><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es ki"><img src="../Images/ecde4110fa2cb4634edaf15d10fde36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*MUsQ7REEhV7-pF4ZXEJdcg.png"/></div></figure><p id="b7e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您的文件夹中应该有一个Gemfile.lock。它应该是这样的:</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es kj"><img src="../Images/6d557845fb1a90e61659990d0b9003f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ypYg9w5pqrDNnTqrNoZihQ.png"/></div></div></figure><p id="a80c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你现在可以发射到Heroku！首先将所有文件添加、提交并推送到github，然后使用以下命令推送到Heroku:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="8d72" class="jp jq hi jg b fi jr js l jt ju">git push heroku master</span></pre><p id="1653" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，你的应用程序可能不会在这一点上工作。您仍然需要设置您的数据库。进入你的Heroku仪表板::&gt;点击资源::&gt;点击Heroku Postgres。</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es kk"><img src="../Images/5e7d31fea15f8343663ff146b1d89184.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*3sJm6hfe1pqCtRGNcGy4aQ.png"/></div></figure><p id="953c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进入postgres数据库仪表板后，转到设置，然后点击“查看凭据”。</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es kl"><img src="../Images/0a3b263392a319518b1ba5edae80cd8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gCrYW4cb029DZt4V0udhQ.png"/></div></div></figure><p id="7e89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，您将获得访问数据库所需的所有数据。将它们复制并粘贴到您的sql runner中，看起来应该是这样的。</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es km"><img src="../Images/e5ef0319e7e9dad8a0e283d7eabfc064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDChyfnOVFk6Nc0RJPu69g.png"/></div></div></figure><p id="87d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您完成了这些，您将需要在播种数据库之前创建一些表。您可以通过运行您的。Heroku数据库中的sql文件夹。为此，您可以返回凭据并复制Heroku CLI。</p><figure class="jh ji jj jk fd jw er es paragraph-image"><div class="er es kn"><img src="../Images/2d53ea1d134a1e127effcfd271d8b0e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*_-6Ifs8srXeNnGx4kZh-0Q.png"/></div></figure><p id="ef03" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">像这样运行您的sql文件。</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="2d9e" class="jp jq hi jg b fi jr js l jt ju">&lt;Your Heroku CLI&gt; &lt; db/&lt;your_sql&gt;.sql</span></pre><figure class="jh ji jj jk fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ko"><img src="../Images/510bafcd61880f8e699f4ce5e94b10a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bghXDNNcIeyh63IeHRNiHw.png"/></div></div></figure><p id="e41a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您可以为数据库设定种子:</p><pre class="jh ji jj jk fd jl jg jm jn aw jo bi"><span id="4f18" class="jp jq hi jg b fi jr js l jt ju">Ruby db/seeds.rb</span></pre><p id="59ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你就完了！…希望如此。</p></div></div>    
</body>
</html>