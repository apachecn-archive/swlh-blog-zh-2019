<html>
<head>
<title>Mobile device management (MDM) for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS版移动设备管理(MDM)</h1>
<blockquote>原文：<a href="https://medium.com/swlh/mobile-device-management-mdm-for-ios-60448313dafb?source=collection_archive---------0-----------------------#2019-03-19">https://medium.com/swlh/mobile-device-management-mdm-for-ios-60448313dafb?source=collection_archive---------0-----------------------#2019-03-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="844f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">让我们来概述一下这个无客户端协议</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/10211248bcfd1a44c3b5175ac860c1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbJ663H8Gtt7yKeRA3r6uA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">iPad iPhone Security</figcaption></figure><p id="fa54" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">最近几周，我一直在研究和搜索MDM。这就是我要和观众分享的。MDM已经成为一个热门话题，因为组织被迫将安全性引入组织。移动设备正在侵入企业社会的各个层面，使得远程管理和控制移动设备的需求变得越来越迫切。苹果提供了一些企业管理功能，首先是通过无线配置文件，从2010年开始，全面支持MDM。</p><h1 id="5fe1" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">为什么需要MDM？🤔</h1><p id="ed72" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">为了理解这一点，让我们举一个例子，考虑一个场景，您的公司有许多iOS设备，您必须集中管理它们，那么您将如何实现这一点？你可以尝试使用第三方MDM应用程序，例如:<a class="ae lg" href="https://www.air-watch.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp lh"> <em class="li">空中观察</em> </strong> </a>，但这非常昂贵💰或者你将尝试实施苹果自己的企业部署方法，即“MDM”。所以我更喜欢第二个👍。</p><h1 id="c0c7" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">让我们了解一下MDM到底是什么？</h1><p id="d3ac" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">移动设备管理(MDM)协议为系统管理员提供了一种向运行iOS 4及更高版本的受管iOS设备发送设备管理命令的方式。通过MDM服务，IT管理员可以检查、安装或删除配置文件、删除密码，并开始在受管设备上进行安全擦除。</p><p id="9713" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">根据<strong class="jp lh">苹果文档</strong>:</p><blockquote class="lj lk ll"><p id="375d" class="jn jo li jp b jq jr ij js jt ju im jv lm jx jy jz ln kb kc kd lo kf kg kh ki hb bi translated">MDM协议建立在HTTP、传输层安全性(TLS)和推送通知之上。相关的MDM签入协议提供了一种将初始注册过程委托给单独的服务器的方法。<br/> MDM使用苹果推送通知服务(APNS)向受管设备发送“唤醒”消息。然后，该设备连接到预定的web服务，以检索命令并返回结果。</p></blockquote><p id="866f" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">因此，我的基本理解是，要提供MDM服务，我们需要部署一个HTTPS服务器作为MDM服务器，然后将包含MDM有效负载的配置文件分发到受管设备。</p><p id="aae9" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp lh">关键特性</strong>🏷:它允许管理员将配置文件推送到设备，无需任何手动干预。</p><h1 id="03c5" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated"><strong class="ak">基础知识</strong></h1><p id="4253" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">MDM服务本质上由三个元素组成:<br/> 1 .被管理的设备(iPhones、ipad、iPod Touches)📱<br/> 2。进行管理的服务器(各种MDM服务器)⚙ <br/> 3。服务器唤醒设备的一种方法(APNS)🤨</p><p id="fd42" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">MDM有效负载可以放在配置概要文件(。mobileconfig)文件通过电子邮件或网页分发，作为无线注册服务提供的最终配置描述文件的一部分，或使用<a class="ae lg" href="https://www.apple.com/business/site/docs/DEP_Guide.pdf" rel="noopener ugc nofollow" target="_blank">设备注册程序(DEP) </a>自动分发。</p><p id="db83" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在任何给定时间，一个设备上只能安装一个MDM有效负载。注册MDM服务器后，MDM服务器和Apple Portal之间将启用安全通信。这用于同步通过苹果DEP门户网站购买的设备的详细信息。</p><p id="6951" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当您找到从Apple portal同步的设备时，您可以将其分配给用户。每当激活设备时，使用MDM施加的所有限制和配置都会自动通过无线方式(OTA)安装到您的所有设备上。通过配置DEP，您可以确保在DEP下购买的所有设备一旦被激活，默认情况下都由MDM管理。在这篇博文中，看看它是如何与服务器一起工作的。🎉</p><h1 id="6b08" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">注册后🤷</h1><p id="4e26" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">客户端设备和MDM server之间的每次交互都包含四个元素:<br/> 1 .服务器通过苹果<br/> 2请求推送通知。苹果向设备<br/> 3推送通知。设备连接到服务器<br/> 4。服务器和客户端交换命令和响应</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lp"><img src="../Images/6494bbde11f0e82ddb677697b99bc946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTCUmYfTfKYyJLwcKUwbsQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">MDM Architecture (<a class="ae lg" href="https://i.stack.imgur.com/mXAT9.png" rel="noopener ugc nofollow" target="_blank"><em class="lq">Source</em></a>)</figcaption></figure><p id="c008" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">除了托管配置文件，您还可以使用MDM来安装应用程序。通过MDM服务安装的应用程序称为托管应用程序。MDM服务还可以控制托管应用及其数据在设备上的使用方式。😎</p><p id="fa36" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp lh">注意⚠️ </strong> <br/>必须获得APNS证书。这是MDM服务器与客户机通信的基础，没有它，MDM服务将无法工作。</p><p id="80c3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">MDM  的一些巨大的<strong class="jp lh"> <em class="li">特性如下:</em></strong></p><ol class=""><li id="a6b4" class="lr ls hi jp b jq jr jt ju jw lt ka lu ke lv ki lw lx ly lz bi translated">空中传播</li><li id="b461" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki lw lx ly lz bi translated">支持多种移动操作系统</li><li id="59fc" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki lw lx ly lz bi translated">安全机制</li><li id="888a" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki lw lx ly lz bi translated">企业级应用管理</li></ol><h1 id="bd27" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">MDM命令周期🌐</h1><p id="6a27" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">MDM协议的主要目的是<strong class="jp lh">向iOS设备</strong>发送命令<strong class="jp lh">处理结果</strong>。MDM协议基于<strong class="jp lh"> HTTPS </strong>(安全HTTP)，用于<strong class="jp lh">交换称为属性列表</strong> (plists)的XML消息。更多关于普利斯的信息，<a class="ae lg" href="http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html" rel="noopener ugc nofollow" target="_blank">请看这里</a>。</p><p id="0bce" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在MDM协议中，服务器不会将命令推送到设备。相反，<strong class="jp lh">服务器使用苹果推送通知服务</strong> (APNS) <strong class="jp lh">来通知</strong>设备新命令可用。</p><p id="6c31" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一旦设备收到推送通知，它就向MDM server查询命令，执行这些命令并将结果发送回MDM server。</p><h1 id="c7a7" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">✍设备注册流程部</h1><p id="4460" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">当服务器向设备提供特殊的配置描述文件时，设备注册到MDM。该配置文件包含:</p><ul class=""><li id="83e7" class="lr ls hi jp b jq jr jt ju jw lt ka lu ke lv ki mf lx ly lz bi translated"><strong class="jp lh"> MDM有效载荷</strong></li></ul><p id="01b0" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是一个特殊的<strong class="jp lh">负载</strong>，它告诉设备它将由MDM服务器管理。它包含服务器URL、推送通知主题和其他属性。有关MDM有效负载的更多详细信息，请参见MDM协议参考。</p><ul class=""><li id="bb3d" class="lr ls hi jp b jq jr jt ju jw lt ka lu ke lv ki mf lx ly lz bi translated"><strong class="jp lh">设备身份证明</strong></li></ul><p id="03d8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">移动服务器需要验证连接的设备。由于MDM是在没有用户交互的情况下自动完成的，因此普通的用户名/密码身份验证不起作用。移动服务器(作为MDM服务器)通过设备的身份证书来验证设备。这称为客户端证书认证，在服务器的SSL层完成。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/75aca8c1a9ff4d7f6aaa56b77f09f212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YSavDF3UC2qS0wUMmJ_SaA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx">How Apple DEP Works (<a class="ae lg" href="https://www.manageengine.com/mobile-device-management/help/images/dep.png" rel="noopener ugc nofollow" target="_blank">source</a>)</figcaption></figure><p id="3d10" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这还没完，看看DEP的官方文件，你就会知道它将包含<a class="ae lg" href="https://www.apple.com/business/site/docs/DEP_Guide.pdf" rel="noopener ugc nofollow" target="_blank">【更多】</a>。😳。</p><h1 id="a1a7" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">创建简单的MDM服务器</h1><p id="8da7" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">&gt;&gt;要求📝</p><ol class=""><li id="583a" class="lr ls hi jp b jq jr jt ju jw lt ka lu ke lv ki lw lx ly lz bi translated">APNS</li><li id="31e2" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki lw lx ly lz bi translated">计算机编程语言</li><li id="29bf" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki lw lx ly lz bi translated">网络连接</li></ol><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/a9050002e41d7acb5fbb8ec0d9219631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WofDIypMpEejdhGNZLF2vw.png"/></div></div></figure><p id="b30b" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">要发送推送，服务器需要与苹果的APNS服务器通信。这需要出站TCP连接到端口2195上的<strong class="jp lh">gateway.push.apple.com</strong>。最后，设备需要能够在MDM注册配置文件中定义的任何端口上联系MDM服务器本身。</p></div><div class="ab cl mh mi gp mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hb hc hd he hf"><h1 id="609f" class="kj kk hi bd kl km mo ko kp kq mp ks kt io mq ip kv ir mr is kx iu ms iv kz la bi translated">一目了然🌟</h1><ul class=""><li id="373a" class="lr ls hi jp b jq lb jt lc jw mt ka mu ke mv ki mf lx ly lz bi translated">MDM检入协议允许设备联系您的服务器。</li><li id="f64f" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">MDM协议向设备发送管理命令。</li><li id="9e16" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">你设计有效载荷的方式很重要。</li><li id="5a5c" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">DEP可让您使用“设置助理”来配置设备。</li><li id="1eab" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">苹果推送通知证书可以通过苹果推送证书门户生成。</li></ul><h1 id="ff82" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">最后的想法🏁</h1><p id="c1f5" class="pw-post-body-paragraph jn jo hi jp b jq lb ij js jt lc im jv jw ld jy jz ka le kc kd ke lf kg kh ki hb bi translated">所有这些都在了解MDM的简短方法中涵盖了。我希望这篇文章激发了你对iOS MDM的更多了解，或者教会了你一些新的东西。真心鼓掌！！👏。我会在页面末尾留下一个链接列表，欢迎评论或给我发送任何其他有用的视频或链接。如果我在接下来的几天/几周/几个月回来，我会展示我学到的更多。要覆盖更多的草稿😎一会儿见！👋</p><h1 id="1043" class="kj kk hi bd kl km kn ko kp kq kr ks kt io ku ip kv ir kw is kx iu ky iv kz la bi translated">有用的资源🔖</h1><ul class=""><li id="41bc" class="lr ls hi jp b jq lb jt lc jw mt ka mu ke mv ki mf lx ly lz bi translated">苹果部署计划:<a class="ae lg" href="http://deploy.apple.com/" rel="noopener ugc nofollow" target="_blank">deploy.apple.com</a></li><li id="f4f6" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">iOS部署参考:<a class="ae lg" href="http://help.apple.com/deployment/ios/" rel="noopener ugc nofollow" target="_blank">help.apple.com/deployment/ios</a></li><li id="5ee4" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">macOS部署参考:<a class="ae lg" href="http://help.apple.com/deployment/ios/" rel="noopener ugc nofollow" target="_blank">help.apple.com/deployment/macos</a></li><li id="fc7b" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">商务IT资源:<a class="ae lg" href="http://www.apple.com/business/resources" rel="noopener ugc nofollow" target="_blank">www.apple.com/business/resources</a></li><li id="eb5d" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">商业设备注册项目:【www.apple.com/business/dep T2】</li><li id="c051" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">商务支持:【www.apple.com/support/business T4】</li><li id="0883" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated">推送通知故障排除:<a class="ae lg" href="https://developer.apple.com/library/archive/technotes/tn2265/_index.html" rel="noopener ugc nofollow" target="_blank">https://developer . apple . com/library/archive/technotes/TN 2265/_ index . html</a></li><li id="0095" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated"><a class="ae lg" rel="noopener" href="/@JoshuaAJung/managing-your-mobile-devices-in-the-cloud-using-apples-own-mdm-solution-8a588d9724b6">https://medium . com/@ Joshua ajung/managing-your-mobile-devices-in-the-cloud-using-apple-own-MDM-solution-8a 588d 9724 b 6</a></li><li id="5b7b" class="lr ls hi jp b jq ma jt mb jw mc ka md ke me ki mf lx ly lz bi translated"><a class="ae lg" rel="noopener" href="/@pradeep.misra/mobile-device-management-mdm-6466d4ca6650">https://medium . com/@ pra deep . misra/mobile-device-management-MDM-6466 D4 ca 665</a></li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mw"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="c148" class="mx kk hi bd kl my mz na kp nb nc nd kt jw ne nf kv ka ng nh kx ke ni nj kz nk bi translated">这篇文章发表在<a class="ae lg" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有+436，678名读者。</h2><h2 id="869c" class="mx kk hi bd kl my mz na kp nb nc nd kt jw ne nf kv ka ng nh kx ke ni nj kz nk bi translated">在此订阅接收<a class="ae lg" href="https://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="iy iz ja jb fd jc er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mw"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>