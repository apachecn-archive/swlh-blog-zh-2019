<html>
<head>
<title>How to run Feature Flagging and Release Management Together</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何同时运行功能标记和版本管理</h1>
<blockquote>原文：<a href="https://medium.com/swlh/how-to-run-feature-flagging-and-release-management-together-d4a0bf650359?source=collection_archive---------73-----------------------#2019-07-08">https://medium.com/swlh/how-to-run-feature-flagging-and-release-management-together-d4a0bf650359?source=collection_archive---------73-----------------------#2019-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e2ae9550d101ec4274bbdeb1f8aafa94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLEPXkxPTkLgi2VfsdZMVQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Photo by <a class="ae iu" href="https://unsplash.com/@drewbutler" rel="noopener ugc nofollow" target="_blank">Andrew Butler</a></figcaption></figure><p id="c58d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着软件行业趋向于更小的版本，快速反馈循环可能会产生与直觉相反的行为作为补救措施。一个常见的二分法是生产系统的稳定性与对开发中最新版本的快速反馈的需求。就像毒品一样，客户的验证越快，你就越想推出更多的开发来再次获得成功。</p><h1 id="3ad8" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">尤里卡</h1><blockquote class="kr"><p id="68ff" class="ks kt hi hj ku kv kw kx ky kz la js dx translated">“我寻找，所以我发现”——我</p></blockquote><p id="52e3" class="pw-post-body-paragraph iv iw hi ix b iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">然后某个聪明的人提出了特性标志，它本质上是包装在条件中的一整块代码。作为一个优点，它有助于减少多分支发布/测试的分支和维护。我不喜欢做不好的工作来引导我们，但是Martin Fowler已经有了一篇关于这种技术实现的很棒的文章。</p><p id="8249" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">特性标志是交钥匙系统的缩影，我坚信这是在迁移到云之前的<a class="ae iu" href="https://www.linkedin.com/pulse/application-ascension-what-really-means-move-cloud-evan-wee-csm/" rel="noopener ugc nofollow" target="_blank">架构需求。特性标志也与连续交付(CD)和连续部署(容易混淆，也缩写为CD)的概念紧密联系在一起。毕竟，将软件即服务应用程序的所有版本汇聚到单一发布流的需求符合CD的叙述(老实说，两者都是)。</a></p><p id="9cc7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这很有道理。包装表明:</p><ul class=""><li id="fb8e" class="lg lh hi ix b iy iz jc jd jg li jk lj jo lk js ll lm ln lo bi translated">降低维护成本</li><li id="b3f7" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">更快和持续的反馈</li><li id="395d" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">较小版本</li><li id="608f" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">更简单的测试和升级</li><li id="60d0" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">降低总开发成本</li><li id="2f87" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">质量更好</li></ul><figure class="lv lw lx ly fd ij er es paragraph-image"><div class="er es lu"><img src="../Images/d4c39d6517e95a635c45cfbb86d7efa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*1rxpxYE8MM5MHi0Yj9jvxw.jpeg"/></div><figcaption class="iq ir et er es is it bd b be z dx">Please read and follow the label</figcaption></figure><p id="e3a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我个人认为工作/生活平衡更好，员工压力更小，但结果可能会有所不同。:)</p><h1 id="fd92" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">和解</h1><blockquote class="kr"><p id="bdda" class="ks kt hi hj ku kv kw kx ky kz la js dx translated">“但是等等，还有！”—每一个电视广告</p></blockquote><p id="cf30" class="pw-post-body-paragraph iv iw hi ix b iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">但我和一位同事越想越觉得，这个猜想需要一系列先决条件:</p><ol class=""><li id="e0c8" class="lg lh hi ix b iy iz jc jd jg li jk lj jo lk js lz lm ln lo bi translated">首先，识别并自动化生产的所有关口</li><li id="2acd" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js lz lm ln lo bi translated">第二，调查涉众对于发布代码的舒适程度，这是一条不需要人工干预的快乐之路</li><li id="288b" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js lz lm ln lo bi translated">第三，画出团队(开发、DevOps、Ops、产品和销售)之间在各个阶段的沟通流程</li><li id="4682" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js lz lm ln lo bi translated">最后，调出所有当前的手动步骤，并计划消除它们</li></ol><p id="97ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本质上，当将特性标记与发布管理联系在一起时，自动化是我们命运的线索，将这对夫妇缠绕在一起。也许是好是坏。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/7926a102720229965c6803d6f3688e61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EUGGY_RT6T55Mw6DJDl3Ew.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">A slightly thicker thread of fate. Couple not included. (Photo by <a class="ae iu" href="https://unsplash.com/@blnk_kanvas" rel="noopener ugc nofollow" target="_blank">Will O</a>)</figcaption></figure><p id="16ee" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">由此推论，代码发布和特性发布是分离的。这意味着代码，无论功能是否完整，都将被推向生产。这一事实需要向组织的高管和利益相关者解释清楚，并让他们接受。</p><h1 id="a2f2" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">责任</h1><blockquote class="kr"><p id="4473" class="ks kt hi hj ku kv kw kx ky kz la js dx translated">“你是父亲！”— <a class="ae iu" href="https://en.wikipedia.org/wiki/Maury_(talk_show)" rel="noopener ugc nofollow" target="_blank">莫里</a></p></blockquote><p id="a89a" class="pw-post-body-paragraph iv iw hi ix b iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">我不会给出一个<a class="ae iu" rel="noopener" href="/@ggiiaa/when-lack-of-clarity-is-killing-your-teams-effectiveness-raci-for-startups-5e85a5ef9931"> RACI </a>的答案，我会给出部分答案，剩下的就是作业了:</p><ul class=""><li id="9150" class="lg lh hi ix b iy iz jc jd jg li jk lj jo lk js ll lm ln lo bi translated">代码发布-开发、开发运维的责任</li><li id="1b16" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js ll lm ln lo bi translated">功能发布-产品、营销/销售的责任</li></ul><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/03493ca22a9ef3762c7c1414d9e847dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kyEJvbL4ENApb_vMOmG9A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">Yes, I am quite serious about the homework. (Photo by <a class="ae iu" href="https://unsplash.com/@pedroplus" rel="noopener ugc nofollow" target="_blank">Pedro da Silva</a>)</figcaption></figure><p id="8386" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">理想情况下，通过特性标记，两种发布类型都是独立的。我们可以并且应该一直推进到生产阶段，以最小化开发和生产代码线之间的任何差距/差异，但有一点需要注意:<em class="mc">如果特性标志总是关闭，那么DevOps和Ops就可以放心地投入生产，并持续交付和自动发布门控</em>。</p><p id="d377" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，产品可以决定在最终用户/客户方便的时候向他们发布该功能，同样带有以下警告:</p><ol class=""><li id="2472" class="lg lh hi ix b iy iz jc jd jg li jk lj jo lk js lz lm ln lo bi translated">标志的启用应该是一个决策点，与相关的组进行协调</li><li id="1a6b" class="lg lh hi ix b iy lp jc lq jg lr jk ls jo lt js lz lm ln lo bi translated">需要存在来自开发的声明的到期窗口，到那时，特征标志<strong class="ix md">必须开启</strong></li></ol><p id="0dcb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">警告让我们诚实地保持一致，并解决了功能标志债务随着时间不知不觉地增长的问题。到期窗口尤其重要；尽管到期窗口不会影响代码合并/发布，但是延迟会影响测试以及新特性标志在关键路径中的吸收。根据您的组织规模，这可能是致命的。</p><h1 id="9008" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">显示</h1><blockquote class="kr"><p id="9ce9" class="ks kt hi hj ku kv kw kx ky kz la js dx translated">“如果说我看得更远，那是因为我站在巨人的肩膀上。”——伊萨克·牛顿</p></blockquote><p id="1239" class="pw-post-body-paragraph iv iw hi ix b iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">这种方法让人想起Azure DevOps，它们的黑暗启动和测试版功能的功能切换最终使其进入永久启用状态，这通常会给那些不太喜欢冒险的人带来惊喜。公平地说，微软确实好心地给<a class="ae iu" href="https://docs.microsoft.com/en-us/azure/devops/release-notes/" rel="noopener ugc nofollow" target="_blank">提供了一个先睹为快的机会</a>，而且他们最近也变得越来越有吸引力。</p><figure class="lv lw lx ly fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es me"><img src="../Images/35c2a598de1770246ab57d045bee2c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3M7nNGc7RdEfUvXQjk24g.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">All this talk about manifestations makes me nervous (Photo by <a class="ae iu" href="https://unsplash.com/@miklevasilyev" rel="noopener ugc nofollow" target="_blank">Mikhail Vasilyev</a>)</figcaption></figure><p id="f2c6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于那些刚开始使用这种方法，但对随时随地持续部署到生产环境犹豫不决的人来说，可以使用已建立并声明的维护窗口的想法来替代，而不管您是否实际使用它们。随着时间的推移，随着信心的增加和代码发布过程的优化，这些窗口可以慢慢地被废弃。</p></div></div>    
</body>
</html>