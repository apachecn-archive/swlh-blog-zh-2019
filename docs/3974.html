<html>
<head>
<title>A Detailed Approach to Setting Up CKEditor with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Angular设置编辑器的详细方法</h1>
<blockquote>原文：<a href="https://medium.com/swlh/a-detailed-approach-of-setting-up-ckeditor-with-angular-e546610157ba?source=collection_archive---------1-----------------------#2019-05-27">https://medium.com/swlh/a-detailed-approach-of-setting-up-ckeditor-with-angular-e546610157ba?source=collection_archive---------1-----------------------#2019-05-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/955351bcc5df4b9ee1118ddf80053005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_BSX61CxShyqW7oT7Kgc8Q.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">Photo by <a class="ae hv" href="https://unsplash.com/photos/TEX3MKBZwLA?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Christopher Flynn</a> on <a class="ae hv" href="https://unsplash.com/search/photos/image-uploads?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="83a5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可能正在为自己的博客工作，并且想知道如何管理富文本内容。在本文中，我试图展示一种逐步建立支持图片上传到云服务的富文本编辑器的方法。</p><h2 id="3d94" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">这篇文章是写给谁的？</h2><ul class=""><li id="687b" class="ko kp hy ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">我和Angular一起工作，或者说我对Angular的工作原理有所了解。</li><li id="8322" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">我试图建立一个编辑器，上传图片到云服务在这种情况下Cloudinary。</li><li id="c067" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">我已经知道如何使用CKEditor，但我似乎不能解决它的图像上传方面的问题。</li><li id="a13b" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">我正在寻找一个工具，帮助挂钩自动从CKEditor上传到Cloudinary图像。</li></ul><h2 id="d014" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">我们将建造什么？</h2><p id="0a7e" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">我们将建立一个非常简单的web应用程序，允许用户在网上创建丰富的文本内容。在编写和提交内容后，用户将被重定向到显示内容的不同页面进行阅读。该项目的示例代码可以在<a class="ae hv" href="https://github.com/IyiKuyoro/ckeditor-image-upload" rel="noopener ugc nofollow" target="_blank"> t </a>中找到。</p><div class="hh hi ez fb hj lh"><a href="https://github.com/IyiKuyoro/ckeditor-image-upload" rel="noopener  ugc nofollow" target="_blank"><div class="li ab dw"><div class="lj ab lk cl cj ll"><h2 class="hz b fi z dy lm ea eb ln ed ef hx bi translated">IyiKuyoro/cke editor-图片-上传</h2><div class="lo l"><h3 class="bd b fi z dy lm ea eb ln ed ef dx translated">从ckeditor 5-IyiKuyoro/ckeditor-image-upload下载我的图像上传教程</h3></div><div class="lp l"><p class="bd b fp z dy lm ea eb ln ed ef dx translated">github.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv hp lh"/></div></div></a></div><p id="80c9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是编辑器页面的外观。</p><figure class="lx ly lz ma fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lw"><img src="../Images/32f992161b1147e09966f1401f57145f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plwBjIglDeuruXAe9u-wLQ.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">A screenshot of the editor page</figcaption></figure><h2 id="2396" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">设置角度项目</h2><p id="44a5" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">获得Angular应用程序设置的最快方法是使用CLI。在本教程中，我们将使用Angular 7，这是制作本教程时的最新版本。因此，如果您还没有这样做，请继续在全球范围内安装它。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="666f" class="jt ju hy mc b fi mg mh l mi mj">npm i --save -g @angular/cli</span></pre><p id="b3ff" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来你要做的事情是建立角度项目。我要给我的项目RichEditor打电话。您可以使用下面的命令创建角度项目。出现提示时，请设置角度路由和CSS。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="158e" class="jt ju hy mc b fi mg mh l mi mj">ng new RichEditor</span></pre><p id="530e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mk">这个项目是用Angular 7建造的。</em> <a class="ae hv" href="https://github.com/IyiKuyoro/ckeditor-cloudinary-image-adapter/issues/10" rel="noopener ugc nofollow" target="_blank"> <em class="mk">根据反馈</em> </a> <em class="mk">，如果您使用^8.2.版本，您将遇到图像上传适配器错误~.要解决这个问题，请将您的</em> <code class="du ml mm mn mc b"><em class="mk">tsconfig.json</em></code> <em class="mk">文件中的es目标更改为</em> <code class="du ml mm mn mc b"><em class="mk">es5</em></code> <em class="mk">。</em></p><p id="a8ea" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在开发模式下启动应用程序。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="ea81" class="jt ju hy mc b fi mg mh l mi mj">cd RichEditor<br/>ng serve</span></pre><p id="3a24" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">到目前为止，你应该已经有了你用CLI创建的任何Angular应用程序的常规首页。</p><h2 id="40c0" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">设置文本编辑器</h2><p id="bbaa" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">我们的编辑器页面将包含以下内容:</p><ul class=""><li id="7f89" class="ko kp hy ix b iy iz jc jd jg mo jk mp jo mq js kv kw kx ky bi translated">标题的输入框。</li><li id="adc2" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">CKEditor 5气球编辑器元素。</li><li id="d104" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">一个提交按钮，仅当上述两个字段已被填充时才显示。</li></ul><p id="9d03" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了加快速度，尽量减少造型上的挫折，我们将使用bootstrap。<em class="mk">我绝不是bootstrap专家，事实上，我并不使用它。所以如果我在这里做事有点效率低下，请原谅我。</em></p><h2 id="4c62" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">添加引导</h2><p id="ecb1" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">使用下面的命令安装bootstrap及其一些依赖项。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="d471" class="jt ju hy mc b fi mg mh l mi mj">npm install --save bootstrap jquery popper</span></pre><p id="41b7" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">像这样在<code class="du ml mm mn mc b">angular.json</code>中给你的棱角样式添加引导样式。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">The Angular styles loaded at startup</figcaption></figure><p id="b3d0" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mk">注意，</em> <strong class="ix mt"> <em class="mk"> y </em> </strong> <em class="mk">你必须重启服务器才能看到引导的效果。</em></p><h2 id="9ae1" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">创建编辑器页面</h2><p id="6569" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">我们将创建编辑器页面作为该应用程序的默认路径。首先，我们创建编辑器组件，它将包含上面提到的所有元素。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="a526" class="jt ju hy mc b fi mg mh l mi mj">ng g c Editor</span></pre><p id="e4a8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后将其作为默认路由添加到路由中。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">The app routes</figcaption></figure><p id="c421" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当然，这不会导致页面默认显示，所以我们将利用<code class="du ml mm mn mc b">&lt;router-outlet&gt;</code>来显示页面。回到<code class="du ml mm mn mc b">app.component.html</code>文件，用<code class="du ml mm mn mc b">&lt;router-outlet&gt;</code>替换它的所有内容。</p><p id="ad06" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这应该会将默认页面的内容更改为“编辑器工作”。太好了。现在对于一些预期的内容。</p><p id="312c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了使我们的内容更加整洁、结构更加合理，需要使用一种文章类型。因此，让我们快速添加一个接口。我喜欢将我所有的类和接口添加到一个名为models的文件夹中，这个文件夹位于src文件夹中。下面是我们将使用的一个简单的粒子界面。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div><figcaption class="hr hs et er es ht hu bd b be z dx">The Article interface</figcaption></figure><p id="c0bb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在添加编辑器之前，为了加快速度，让我们用角度模板驱动的表单设置标题和按钮的输入框。请记住，您将需要在您的应用程序模块中导入<code class="du ml mm mn mc b">FormsModule</code>来使其工作。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="023d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里只是一点CSS。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="905a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一些组件代码把它带回家。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="a3ab" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要添加编辑器，首先要安装ckeditor5 angular包。该软件包包含CKEditor模块，它将使设置成为可能。我们还需要安装我们想要使用的编辑器。在这种情况下，因为我们想保持编辑器的整洁和不受干扰，我们将使用balloon。下面是安装这两个包的命令。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="b9c6" class="jt ju hy mc b fi mg mh l mi mj">npm i --save @ckeditor/ckeditor5-angular @ckeditor/ckeditor5-build-balloon</span></pre><p id="9031" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">将<code class="du ml mm mn mc b">CKEditorModule</code>添加到<code class="du ml mm mn mc b">app.module.ts</code>文件的导入列表中。别忘了先从<code class="du ml mm mn mc b">@ckeditor/ckeditor5-angular</code>导入。</p><p id="bf01" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">接下来，我们需要将编辑器本身添加到模板中。为了做到这一点，我们需要首先将气球编辑器导入到<code class="du ml mm mn mc b">editor.component.ts</code>文件中。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="043b" class="jt ju hy mc b fi mg mh l mi mj">...<br/>import * as BalloonEditor from '@ckeditor/ckeditor5-build-balloon';<br/>...</span></pre><p id="5b75" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<code class="du ml mm mn mc b">EditorComponent</code>类中创建一个新字段，并将其分配给BallonEditor。完成后，您还需要声明config对象来保存编辑器的所有设置。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="68c4" class="jt ju hy mc b fi mg mh l mi mj">...<br/>Editor = BalloonEditor;<br/>editorConfig = {<br/>    placeholder: 'Type the content here!',<br/>};<br/>...</span></pre><p id="2912" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以在这里找到配置对象<a class="ae hv" href="https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editorconfig-EditorConfig.html" rel="noopener ugc nofollow" target="_blank">的更多属性。</a></p><p id="14a5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mk">注意，当前有一个</em> <a class="ae hv" href="https://github.com/ckeditor/ckeditor5/issues/1758" rel="noopener ugc nofollow" target="_blank"> <em class="mk">已知问题</em> </a> <em class="mk">在生产中使用</em> <code class="du ml mm mn mc b"><em class="mk">placeholder</em></code> <em class="mk">属性。出于完整性的考虑，我把它留在这里，因为它在开发服务器上运行良好。一旦这个问题得到解决，我会回来删除这个说明。</em></p><p id="bd19" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您的<code class="du ml mm mn mc b">editor.component.ts</code>文件现在应该看起来像下面这样。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="3eb5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要在页面上显示编辑器，只需在输入元素和按钮之间添加<code class="du ml mm mn mc b">ckeditor</code>标签和其他属性，如下所示。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="90d6" class="jt ju hy mc b fi mg mh l mi mj">...<br/>&lt;ckeditor<br/>    [config]="editorConfig" [editor]="Editor"<br/>    required [(ngModel)]="article.text"<br/>    data="" name="text"<br/>&gt;&lt;/ckeditor&gt;<br/>...</span></pre><p id="5d60" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将在页面上产生一个简单的编辑器，它是干净的，不受干扰的。您可以通过突出显示文本和使用工具提示来格式化文本和添加图像。</p><figure class="lx ly lz ma fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mu"><img src="../Images/402c891b582ab79be4a63f9955e8e57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FVOJJMaG7O_AavcLMbssjA.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx">A screenshot of the editor displaying som lorem ipsum text</figcaption></figure><p id="cc84" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你现在尝试添加一张图片，你会马上发现一个问题。图像似乎没有被添加，并且在控制台中显示一个错误，说“file repository-no-Upload-adapter:Upload adapter is not defined”完全正确。您需要设置图像上传适配器，以便CKEditor知道将嵌入的图像上传到哪里。有两种主要的方法，关于这两种方法的说明可以在<a class="ae hv" href="https://ckeditor.com/docs/ckeditor5/latest/features/image-upload/image-upload.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。但是你很幸运！我用Cloudinary编写了一个定制的适配器来为您实现这一点。让我们看看如何设置它。</p><h2 id="2a89" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">添加Cloudinary图像上传适配器</h2><p id="501a" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated"><em class="mk">如果你在2020年6月之前读到这篇文章，请注意该部分自那以后已经发生了变化。我反对“ckeditor-cloud inary-uploader-adapter ”,而支持“puff-puff ”,它做了同样的事情，甚至更多。</em></p><p id="784b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，去<a class="ae hv" href="https://cloudinary.com/" rel="noopener ugc nofollow" target="_blank"> Cloudinary </a>创建一个账户，如果你还没有的话。如果您愿意，可以在注册时更改分配给您的云名称。从仪表盘中获取您的云名称，然后按照说明(可在此处找到<a class="ae hv" href="https://support.cloudinary.com/hc/en-us/articles/360004967272-Upload-Preset-Configuration" rel="noopener ugc nofollow" target="_blank"/>)创建未签名的上传预设。你不需要任何插件。你很快就会需要这两个变量。</p><p id="0a13" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，从<a class="ae hv" href="https://www.npmjs.com/package/puff-puff" rel="noopener ugc nofollow" target="_blank"> npm </a>安装帮助我们动态完成这项工作的软件包。不用担心，它是非常轻量级的，没有任何依赖性。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="f4fc" class="jt ju hy mc b fi mg mh l mi mj">npm i --save puff-puff</span></pre><p id="d085" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦完成，下一件你想做的事情就是在<code class="du ml mm mn mc b">editor.component </code>中添加一个工厂函数，CKEditor使用你刚刚安装的包动态创建上传适配器。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="1eeb" class="jt ju hy mc b fi mg mh l mi mj">...</span><span id="2e65" class="jt ju hy mc b fi mv mh l mi mj">import { CloudinaryUnsigned } from 'puff-puff/CKEditor';</span><span id="29f8" class="jt ju hy mc b fi mv mh l mi mj">...</span><span id="1fd0" class="jt ju hy mc b fi mv mh l mi mj">imagePluginFactory(editor) {<br/>    editor.plugins.get( 'FileRepository' ).createUploadAdapter = (    loader ) =&gt; {</span><span id="dcd4" class="jt ju hy mc b fi mv mh l mi mj">return new CloudinaryUnsigned( loader,   &lt;your_cloud_name&gt;, &lt;your_unsigned_upload_preset&gt;);</span><span id="7e0d" class="jt ju hy mc b fi mv mh l mi mj">    };</span><span id="f037" class="jt ju hy mc b fi mv mh l mi mj">}<br/>...</span></pre><p id="c62f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦完成，添加工厂函数作为<code class="du ml mm mn mc b">extraPlugins</code>数组的唯一元素。<code class="du ml mm mn mc b">extraPlugins</code>是我们之前添加的<code class="du ml mm mn mc b">editorConfig</code>对象的属性。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="7efb" class="jt ju hy mc b fi mg mh l mi mj">editorConfig = {<br/>   placeholder: 'Type the content here!',<br/>   <strong class="mc mt">extraPlugins: [ this.imagePluginFactory ],</strong><br/>};</span></pre><p id="c810" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你的<code class="du ml mm mn mc b">editor.component.ts</code>文件应该看起来像下面这样。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="67e6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">仅此而已。你现在应该可以上传图片了。当图像成功上传后，会出现一个上传进度条和一个勾号。</p><p id="761b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是还有一件事。图像不会有反应。为了管理它，我们需要做的就是向<code class="du ml mm mn mc b">CloudinaryUnsigned</code>构造函数添加最后一个属性。这应该是一个数字数组，表示我们希望CKEditor在支持图像响应时使用的图像大小。请记住，这必须从最小尺寸到最大尺寸进行，尺寸以像素为单位。以下是方法。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="f373" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们支持响应式图像。继续向文本区域添加一些图像。等待图片上传到你的云端仪表盘，你应该可以看到已经上传的图片。</p><p id="3c79" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Puff-Puff还可以帮助将图像上传到自定义后端服务。你所需要的只是一个来自后端服务的上传URL。点击查看更多关于<a class="ae hv" href="https://gist.github.com/IyiKuyoro/bea2cb8501af02c94e52fa2df2fedaa8" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h2 id="97ec" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">提交表单</h2><p id="3f9f" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">这里我们要做的最后一件事是提交表单，并将数据发送到新的路由进行显示。理想情况下，您可能希望将新文章发送到后端服务器进行存储或类似的操作。</p><h2 id="5d98" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">创建新的路线和组件</h2><p id="ce9c" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">生成一个新组件，并将其命名为“视图”。将路径为“view”的新路由添加到应用程序routes，并使用新创建的ViewComponent作为其组件。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="12ae" class="jt ju hy mc b fi mg mh l mi mj">ng g c view</span></pre><p id="30e9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix mt">在查看路径中显示新文章</strong></p><p id="316d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在<code class="du ml mm mn mc b">editor.component.ts</code>文件的<code class="du ml mm mn mc b">onSubmit</code>函数中，导航到查看路线并传递新文章作为NavigationExtra的状态。你将需要注入角路由器来工作。</p><pre class="lx ly lz ma fd mb mc md me aw mf bi"><span id="653e" class="jt ju hy mc b fi mg mh l mi mj">onSubmit() {<br/>    this.router.navigate(['/view'], { state: this.article});<br/>}</span></pre><p id="4ac4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要显示文章内容，下面是<code class="du ml mm mn mc b">view.component.html</code>文件应该是什么样子。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="4bb5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您会看到我们仍然在使用<code class="du ml mm mn mc b">ckeditor</code>元素来呈现文章的内容。这完全正确。我们可以使用div或段落来呈现内容，但是不支持图像响应。但是，将disabled属性设置为true很重要，这样内容就不可编辑了。</p><p id="184f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">而<code class="du ml mm mn mc b">view.component.ts</code>文件应该是这样的。</p><figure class="lx ly lz ma fd hk"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="2d5c" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们找到了。在本文中，我们已经学会了如何做到以下几点:</p><ul class=""><li id="3261" class="ko kp hy ix b iy iz jc jd jg mo jk mp jo mq js kv kw kx ky bi translated">设置CKEditor5气球编辑器</li><li id="e4d9" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">为CKEditor设置一个简单的Cloudinary图像上传适配器</li><li id="19e3" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">添加对响应图像的支持</li><li id="e9aa" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">在浏览器页面上显示富文本内容</li></ul><p id="422d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读！</p><p id="b891" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="mk">如果您发现错误，请私信，我会尽快解决。感谢</em>😄</p></div></div>    
</body>
</html>