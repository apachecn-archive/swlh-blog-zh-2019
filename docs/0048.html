<html>
<head>
<title>Building the solar plant of the future with cloud technologies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用云技术建造未来的太阳能发电厂</h1>
<blockquote>原文：<a href="https://medium.com/swlh/building-the-solar-plant-of-the-future-with-cloud-technologies-66be12adcb3c?source=collection_archive---------16-----------------------#2019-01-03">https://medium.com/swlh/building-the-solar-plant-of-the-future-with-cloud-technologies-66be12adcb3c?source=collection_archive---------16-----------------------#2019-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9846bdc3b54bc909eeb98dc470a0dfd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNr7eb3gAo383_nTC_K0gQ@2x.jpeg"/></div></div></figure></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="0112" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在过去十年中，对可再生能源的需求一直在稳步增长，太阳能发电超过了所有其他可再生发电形式的增长。</p><p id="baf3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">太阳能电池板越来越便宜，并在世界许多地方成为经济上可行的可再生能源。</p><p id="f5da" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">除了企业和政府，越来越多的个人发现安装太阳能电池阵列在小范围内是可行的。</p><p id="4886" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">然而，从太阳能电池板获取最佳能量是一件棘手的事情。</p><p id="8674" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">为了让太阳能电池板高效运行，它们需要保持清洁，并与太阳保持最佳角度，以平衡发电和防止过热。</p><p id="20e8" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">那么，当事情不对劲，需要你注意时，你如何让一切都在掌控之中，并得到通知呢？</em></p><h1 id="6985" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">软件正在吞噬世界</h1><p id="48b2" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">一种解决方案是利用小型嵌入式设备</p><ul class=""><li id="09ed" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju lf lg lh li bi translated">测量电池的性能和效率</li><li id="1617" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">监控环境</li><li id="ae3c" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">驱动致动器在白天跟踪太阳</li></ul><p id="0cf9" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">嵌入式计算机收集数据并将其发送到一个中心位置，然后在那里进行汇总、处理和存储。</p><p id="cef2" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">如果太阳能电池板的效率下降，可以提醒操作员采取行动。</p><p id="2c16" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在更大的工厂中，太阳能电池阵列的数据通过有线网络传输，但看到这些嵌入式计算机无线连接并不罕见。</p><p id="b7de" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">想象一下将你的太阳能电池板控制在5G以上:</strong>无需处理额外电缆的美妙之处，以及长时间响应、掉线和超时的可怕之处。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/182a1398bb627046d3cfffee1534b628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8IJAQ_nQo_GwYb6w_IPZzg.gif"/></div></div></figure><p id="b631" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在这样的设置中，部署和管理应用程序是一个真正的挑战。</p><h1 id="e96a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">大规模设计物联网</h1><p id="ef69" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">如果您正在管理数百或数千台设备，亲自去每台设备安装软件和固件更新是不现实的。</p><p id="ec6d" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你应该设计一个可以远程更新的系统。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/8ad4a322e88463615bbd7e030f48d138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6M6VRl19quFeQ3t0UdrnZQ.gif"/></div></div></figure><p id="c7d0" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">理想情况下，您应该设计一种机制来打包软件，在不牺牲可移植性的情况下，开销几乎为零。</p><p id="c1c5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">小而有效的东西。</p><p id="7f05" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">它将持续数年，并安全地传输数据，以防止恶意行为者破坏您的基础架构。</p><p id="e263" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">通信应该处处加密。</strong></p><p id="f346" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">但是如何？</em></p><p id="4a93" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">设计一个安全的集群并不是一件容易的事，特别是在一个太阳能装置上，它可以跨越很大的区域，很难保护周边免受入侵者的攻击，这些入侵者可以通过物理方式访问您的设备来获取机密。</p><p id="584a" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">您如何防范这种情况？</em></p><p id="bb1e" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">即使你已经解决了安全问题，并推出了软件和固件更新策略，你还有很长的路要走。</p><p id="0119" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您仍然需要创建一个服务来聚合和处理数据，设计一个可视化的仪表板，设置警报和监控，以及一个控制平面来推动协调的变化。</p><p id="c675" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">起初看似有趣的周末项目变成了分布式系统工程中的主要工作。</p><p id="62be" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">存在专门为太阳能发电厂设计和安装软件的公司。该不该投降买预包装软件？</p><p id="e6c3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">从来没有。</p><p id="d369" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">那么，你如何才能与一家拥有多年经验的老牌企业竞争呢？</p><p id="08f6" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">靠耍小聪明。</strong></p><h1 id="4d98" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">使用云基础架构扩展集群</h1><p id="c66b" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">构建大规模的物联网，比如太阳能发电厂的规模，与构建云基础设施有很多共同点。</p><p id="c12f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Amazon Web Services的产品弹性容器服务(ECS)可以跨几个服务器部署应用程序。</p><p id="c5e3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">它被设计为在工作计算机上安装一个代理，该代理与负责调度工作负载的主节点通信。</p><p id="f184" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您告诉ECS要部署什么，主节点上的软件指示其中一个代理下载并运行它。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/68ee107afa5d0a909212ccc5966122fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3mc3_VEFrzF8g9vsmNdOzQ.gif"/></div></div></figure><p id="0196" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这听起来很像你想用太阳能电池板做的事情。</p><p id="7a40" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您希望在每台嵌入式计算机上安装代理，并且希望从中央位置管理应用程序。</p><p id="7230" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">但是ECS是亚马逊才有的，你在硬件上是占不到便宜的。</p><p id="57f8" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你需要的是ECS的开源版本。</p><p id="30fb" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">进入Kubernetes。</strong></p><h1 id="3032" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">kubernetes——容器编制者</h1><p id="f67e" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">Kubernetes类似于ECS:您在设备上安装一个名为kubelet的代理，它与Kubernetes主服务器通信，形成一个集群。</p><p id="3550" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">从那时起，您的设备就像一个整体，您可以安排部署和管理应用程序。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lv"><img src="../Images/3f090fa4205a4903a92770fc24fe6936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pePnrXIqiecOGjM18JxSdA.gif"/></div></div></figure><p id="07ba" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">然而，这一次，你没有被锁定。</p><p id="765c" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Kubernetes是一个主要的开源项目，你可以免费下载、定制和贡献。</p><p id="1ba3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">安全吗？</em></p><p id="26fc" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">kubelet和主节点之间的通信使用TLS进行保护。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div class="ab fe cl lw"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><p id="03f8" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">每个节点都可以配置自己的证书，因此即使一个节点受损，您也可以只拒绝一个证书，同时保持群集的其余节点可用。</p><p id="8186" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">更好的是，该社区有大量关于如何保护您的集群的良好实践的共享资源，这些资源是从数千个真实的Kubernetes部署中收集的。</p><p id="7665" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你应该看看这些kubernetes安全最佳实践的集合，明白我的意思。</p><p id="a93d" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">现在，如果它有办法推出更新就好了……</em></p><p id="e1c0" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Kubernetes不知道如何部署用C、Java或Node.js编写的应用程序。</p><p id="b185" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">事实上，它根本不知道如何部署应用程序。</p><p id="5818" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">那没用，是吗？</p><p id="aec3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Kubernetes只能部署Linux容器——这也是它被称为“容器协调器”的原因。</p><p id="8d9b" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">容器本质上是档案——类似于zip文件。</strong></p><p id="2c95" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">要运行容器，您需要解包归档文件，并在主机上将应用程序作为一个进程运行。</p><p id="a763" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您可能不希望进程相互干扰，所以Linux容器有一个很好的特性，即每个进程都是相互隔离的。</p><p id="c19b" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">因此，除了开发分发应用程序的机制，您还可以:</p><ol class=""><li id="a20a" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju ly lg lh li bi translated">请Kubernetes安排一次部署</li><li id="3047" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju ly lg lh li bi translated">等待每个节点上的代理(kubelet)来接收任务</li><li id="a2bd" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju ly lg lh li bi translated">让kubelet下载存档文件，并作为一个独立的进程运行它。</li></ol><p id="8b17" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">集装箱也被设计成高效的。</strong></p><p id="652f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">当您更新您的包裹并希望重新分发它时，您只能运送先前和当前集装箱之间的差额。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lz"><img src="../Images/8aef76e227fb0d1959bb388620eb3ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8sLlS8APgBfxXy2HQQ7HIA.gif"/></div></div></figure><p id="4943" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">当收到增量时，新的包从diff重新计算，解压缩并作为一个单独的进程运行。</p><p id="7381" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Linux容器和Kubernetes是在你的物联网上运行应用程序的优秀平台。</p><p id="fa65" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">事实上，在太阳能发电厂安装Kubernetes可以让您受益于:</p><ul class=""><li id="2769" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju lf lg lh li bi translated">发布部署的集中调度程序</li><li id="95c8" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">作为容器交付的安全和加密的更新</li><li id="95aa" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">一项成熟的技术，能够扩展到数千台设备</li></ul><p id="35d3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">那么，当太阳能电池板破裂时会发生什么呢？</p><h1 id="021f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">Kubernetes中的弹性和故障转移</h1><p id="c6a8" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">Kubernetes会持续监视您的基础设施，寻找失败的流程和代理。</p><p id="55a4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">当一台设备出现故障时，Kubernetes会将该计算机上部署的所有应用程序重新安排到另一台计算机上。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/522edc0b4a11b6b793e6059bdca175c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6_E8ktAPGssX0v9bQejaZQ.gif"/></div></div></figure><p id="5b10" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">如果其中一个应用程序失败，可能是因为内存泄漏，Kubernetes将重新启动应用程序预定的次数。</p><p id="ba87" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Kubernetes的设计是基于这样一种理解，即不能期望节点永远继续工作，所以有一个自我修复的设计；它总是观察基础架构的当前状态，并在检测到与基础架构的期望状态不匹配时采取措施。</p><p id="7c73" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">例如，如果它发现差异，如果没有足够的容量来运行所有的应用程序，它会要求云提供商提供更多的计算资源。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/68c535d8646bfdd7e1ea6dccca23eacc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HuU9f7ed5n8kWjU_Xcwe9Q.gif"/></div></div></figure><p id="6244" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">Kubernetes非常适合以最大化基础设施效率的方式部署容器。</p><p id="4b23" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">当您部署一个应用程序的三个实例时，这些实例被安排来最大化效率。</p><p id="84e5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">不能保证您的应用程序的三个实例最终会出现在五个不同的设备上。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/813871bb5bb14eb015fdc5a937a3b270.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DMdtxKdmUaEguxFoEb83tg.gif"/></div></div></figure><p id="a009" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">它们可以全部部署在同一个节点上，也可以跨两个节点部署，这取决于可用的物理资源。</p><p id="0d0c" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">特别是在资源稀缺的嵌入式领域，您不希望将部署放在任何地方。</p><p id="18b1" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><strong class="iz jv">您希望有一套严格的部署规则。</strong></p><p id="ad32" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">例如，每个太阳能电池板在任何给定的时间都应该只有一个应用程序在运行。</p><p id="d0d6" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在应用程序负责倾斜太阳能电池板以跟踪太阳轨迹的情况下，您不希望将两个应用程序部署在试图驱动同一台电机的同一个节点上。</p><h1 id="b288" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">Kubernetes中的高级部署</h1><p id="af92" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">Kubernetes可以使用几种策略来为节点分配容器。</p><p id="94c5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">最直截了当的策略是部署<a class="ae lx" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank"><em class="jw"/></a>。</p><p id="a6f2" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">在<em class="jw">部署</em>中，您指定应用程序的实例数量，Kubernetes将找到空间来分配它们。</p><p id="d181" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这是最常见的部署类型，但是虽然它对于云部署很有用，在云部署中，您不需要关心哪个特定的节点正在运行我们的应用程序(您只需要关心它是由什么东西运行的)，但是在嵌入式环境中，它就没那么有用了。</p><p id="548f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">其他策略包括<a class="ae lx" href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" rel="noopener ugc nofollow" target="_blank"><em class="jw">statefullset</em></a>和<a class="ae lx" href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" rel="noopener ugc nofollow" target="_blank"> <em class="jw"> ReplicaSet </em> </a>。</p><p id="4b18" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">它们中的每一个都有不同的权衡，但并不符合我们让应用程序在每个可用节点上运行的目标。</p><p id="67ec" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">为此，您需要一个<a class="ae lx" href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" rel="noopener ugc nofollow" target="_blank"> <em class="jw"> DaemonSet </em> </a>，一个在每个节点上部署一个应用程序的策略。</p><p id="5e80" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">如果您向集群添加新的物联网太阳能电池板，Kubernetes也会自动在该嵌入式设备(节点)上调度和部署应用程序。</p><figure class="lp lq lr ls fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es md"><img src="../Images/1b0f76b9e81e5b94e5e931cb7f170653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*w3yuaYyDZujFsmiwhD7doQ.gif"/></div></div></figure><p id="2dce" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">到目前为止一切顺利。</p><p id="29e1" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你有:</p><ul class=""><li id="3214" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju lf lg lh li bi translated">打包成Linux容器的应用程序</li><li id="0680" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">一种安全、增量分发软件的集中方式</li><li id="1027" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">在所有设备上部署应用的策略(对硬件访问进行优先排序)，或在尽可能少的设备上部署应用的策略(最大化效率)</li><li id="4114" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">出现故障时能够自我修复的可靠平台</li></ul><p id="19c8" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">考虑到你是白手起家，你现在的处境相当不错。</p><p id="50b0" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">现在您已经知道Kubernetes的能力以及它如何扩展您的物联网，下一步是什么？</p><blockquote class="me mf mg"><p id="5d62" class="ix iy jw iz b ja jb jc jd je jf jg jh mh jj jk jl mi jn jo jp mj jr js jt ju hb bi translated"><strong class="iz jv"> <em class="hi">不要错过接下来的故事、实验或提示。如果你喜欢这篇文章，请继续关注。将新内容直接发送到您的收件箱，并提高您在Kubernetes中的专业水平。</em> <a class="ae lx" href="https://learnk8s.io/newsletter" rel="noopener ugc nofollow" target="_blank"> <em class="hi">现在就订阅</em> </a></strong></p></blockquote><h1 id="9175" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">在车里跑Kubernetes</h1><p id="2c3c" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">2018年6月，Redmonk写了一篇文章，建议<a class="ae lx" href="https://redmonk.com/jgovernor/2018/06/28/rancher-labs-treating-cattle-like-cattle/" rel="noopener ugc nofollow" target="_blank">丰田在其汽车中运行Kubernetes</a>。</p><p id="ff19" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你可以想象你汽车上的每一个小部件，如仪表板、收音机功能或侧灯，都装有装有Kubernetes代理的计算机。</p><p id="6f71" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">这些组件相互连接，可以使用内部网络进行通信。</p><p id="e90f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">kubernetes主服务器负责确保服务始终启动和运行，以及调度部署。</p><p id="1c03" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">需要更换仪表板吗？</em></p><p id="1dc5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">只需更换组件，Kubernetes就会安排软件在嵌入式计算机上运行。</p><p id="fb5f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">添加GPS？</em></p><p id="b13c" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">没问题。</p><p id="36ff" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">将设备加入集群，并开始传输数据。</p><p id="0ed4" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">起初，这听起来可能有些奇怪。</p><p id="41bc" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">但仔细想想，也有道理。</p><p id="e0c9" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您必须连接这些组件并协调它们。</p><p id="ba65" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你不能让前灯从仪表板上断开。</p><p id="0fc3" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">但事实证明这是不对的。</p><p id="bbab" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">丰田没有在他们的汽车上运行Kubernetes，但他们将Kubernetes作为其后端服务的一部分。</p><p id="a0f9" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">一旦你将汽车连接到他们的诊断工具之一，数据就会从车辆中提取出来，并被吸收到一个旨在运行在云中的Kubernetes集群中。</p><p id="1ddf" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">文章发表几天后，Redmonk修改了文章以澄清这一点。</p><p id="6f94" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">即使这个故事是不真实的，只是一个误解的结果，它仍然会让你思考。</p><p id="4509" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">如果呢？</em></p><h1 id="9dde" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">如果你能在车里运行Kubernetes会怎么样？</h1><p id="17c2" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated"><em class="jw">是什么阻止你在太阳能发电厂使用Kubernetes？</em></p><p id="6f0d" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">还是在其他任何物联网设备中？</em></p><p id="b77e" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">您可以解决一些困难的挑战，如保护通信、提供增量更新和集中控制您的车队。</p><p id="058f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">你可能有最好的时机来推销你的物联网。</p><p id="d2e0" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">节省了数百天的开发时间，因为您可以重用成熟的工具。</p><p id="7697" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">虽然kubernetes最初被设计为在数据中心运行，但它的应用远远超出了云，而且用不了多久，Kubernetes就会在另一个物联网设置中使用。</p><p id="c1a5" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">我迫不及待地想知道你下一步会用它做什么。</p><h1 id="246f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">那都是乡亲们！</h1><p id="cc3d" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">感谢<a class="ae lx" href="https://www.linkedin.com/in/aledjames/" rel="noopener ugc nofollow" target="_blank">阿莱德·詹姆斯</a>(布里斯托尔大学)和<a class="ae lx" href="https://twitter.com/heckj" rel="noopener ugc nofollow" target="_blank">乔·海克</a>的反馈！</p><p id="5333" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">如果您喜欢这篇文章，您可能会发现下面的文章很有趣:</p><ul class=""><li id="cbef" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju lf lg lh li bi translated"><a class="ae lx" href="https://learnk8s.io/blog/what-is-kubernetes" rel="noopener ugc nofollow" target="_blank">什么是Kubernetes？优化您的托管成本和效率</a>,了解Kubernetes的工作原理以及最初发明它的原因</li><li id="6d74" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated"><a class="ae lx" href="https://learnk8s.io/blog/kubernetes-chaos-engineering-lessons-learned" rel="noopener ugc nofollow" target="_blank"> Kubernetes混沌工程:经验教训——第1部分</a>当Kubernetes出现问题时会发生什么？Kubernetes能从失败中恢复并自愈吗？</li></ul><h1 id="6b39" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">成为Kubernetes中部署和扩展应用程序的专家</h1><p id="1fd6" class="pw-post-body-paragraph ix iy hi iz b ja kv jc jd je kw jg jh ji kx jk jl jm ky jo jp jq kz js jt ju hb bi translated">你在建太阳能工厂吗？也许是辆车？还是只想大规模部署web应用程序？</p><p id="d74a" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">从我们的实践课程开始，学习如何掌握Kubernetes。</p><p id="25fc" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">了解如何:</p><ul class=""><li id="6351" class="la lb hi iz b ja jb je jf ji lc jm ld jq le ju lf lg lh li bi translated">轻松处理最繁忙的流量网站</li><li id="64c6" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">将您的作业扩展到数千台服务器，并将等待时间从几天缩短到几分钟</li><li id="ed80" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">了解您的应用在多云设置下高度可用，让您高枕无忧</li><li id="e40f" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">通过仅使用您需要的资源，在您的云账单上节省大量现金</li><li id="9c30" class="la lb hi iz b ja lj je lk ji ll jm lm jq ln ju lf lg lh li bi translated">增强您的交付渠道，全天候部署应用程序</li></ul><p id="bf51" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><a class="ae lx" href="https://learnk8s.io/training" rel="noopener ugc nofollow" target="_blank"> <strong class="iz jv">成为专家→ </strong> </a></p><p id="573f" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated">P.S .不要错过下一个实验，洞察，或者<em class="jw">优惠</em> : <a class="ae lx" href="https://learnk8s.io/newsletter" rel="noopener ugc nofollow" target="_blank">订阅邮件列表！</a></p></div><div class="ab cl iq ir gp is" role="separator"><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv iw"/><span class="it bw bk iu iv"/></div><div class="hb hc hd he hf"><p id="6bcd" class="pw-post-body-paragraph ix iy hi iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hb bi translated"><em class="jw">最初发布于</em><a class="ae lx" href="https://learnk8s.io/blog/kubernetes-on-solar-plants" rel="noopener ugc nofollow" target="_blank"><em class="jw">learn k8s . io</em></a></p><figure class="lp lq lr ls fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mk"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="c148" class="ml jy hi bd jz mm mn mo kd mp mq mr kh ji ms mt kl jm mu mv kp jq mw mx kt my bi translated">这篇文章发表在<a class="ae lx" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有+406，714名读者。</h2><h2 id="869c" class="ml jy hi bd jz mm mn mo kd mp mq mr kh ji ms mt kl jm mu mv kp jq mw mx kt my bi translated">在这里订阅接收<a class="ae lx" href="http://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="lp lq lr ls fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mk"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>