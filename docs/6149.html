<html>
<head>
<title>Routing in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的路由</h1>
<blockquote>原文：<a href="https://medium.com/swlh/routing-in-react-7e193344fccb?source=collection_archive---------33-----------------------#2019-06-18">https://medium.com/swlh/routing-in-react-7e193344fccb?source=collection_archive---------33-----------------------#2019-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="bd3e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将介绍如何在react中设置路由！</p><p id="289e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">React路由通过操纵窗口来工作。如果你打开控制台并输入“window.history ”,你会得到类似这样的结果:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6858" class="jm jn hi ji b fi jo jp l jq jr">History {length: 4, scrollRestoration: "auto", state: null}</span></pre><p id="568b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过执行以下操作来更改状态:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f95a" class="jm jn hi ji b fi jo jp l jq jr">window.history.pushState({newState: "This is a new state!"}, "new state", "new-state")</span></pre><p id="0d2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你再次输入“window.history ”,你会看到结果已经改变。您将状态设置为对象{newState:“这是一个新状态！”}，您将会看到在url的末尾添加了一个“新状态”。</p><p id="c816" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您现在键入“window.history.back()”，url将被更改为以前的形式，如果您键入“window.history”，状态也将被改回。如果你再次输入“window.history.back()”，你将返回整个页面。ReactRouter是通过此方法手动操作url和状态的方式</p><p id="f4ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们先来设置一个新的react app。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="7783" class="jm jn hi ji b fi jo jp l jq jr">create-react-app (route-testing)</span></pre><p id="2bc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来启动并运行服务器。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3d95" class="jm jn hi ji b fi jo jp l jq jr">npm start</span></pre><p id="20dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在安装react-router-dom。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1b46" class="jm jn hi ji b fi jo jp l jq jr">npm install react-router-dom</span></pre><p id="f1f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将“BrowserRouter”组件作为<br/> Router”导入，并将“Route”组件导入到“index.js”中。另外，添加一个函数，并让路径呈现该函数。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="2f97" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import * as serviceWorker from './serviceWorker';<br/>import {BrowserRouter as Router, Route} from 'react-router-dom'</span><span id="1bdc" class="jm jn hi ji b fi js jp l jq jr">const Test = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>    Test<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="3ff6" class="jm jn hi ji b fi js jp l jq jr">ReactDOM.render((<br/>  &lt;Router&gt;<br/>    &lt;Route path="/" render={Test} /&gt;<br/>  &lt;/Router&gt;),<br/>  document.getElementById('root')<br/>);</span><span id="b9a2" class="jm jn hi ji b fi js jp l jq jr">serviceWorker.unregister();</span></pre><p id="ca09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在您将看到测试函数的内容。我们给了页面一个呈现Test的路径，因为我们现在就在这个路径上，所以它可以正确地呈现。</p><p id="3ab1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你去你的浏览器栏，在/后面添加随机的字母，它现在仍然可以工作。这是因为我们称它为“path ”,默认情况下会将所有内容呈现给该路径。如果我们想让它只在使用精确的单词时才呈现某些东西，我们使用“精确路径”。如果将该行改为:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="4346" class="jm jn hi ji b fi jo jp l jq jr">&lt;Route exact path="/" render={Test} /&gt;</span></pre><p id="8c5e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你会注意到，当我们在它后面有随机字符时，它不再工作，但如果我们删除它们，并将其更改回just /它将再次正确显示。</p><p id="71b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再来补充一些其他的路线和功能。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="2fa1" class="jm jn hi ji b fi jo jp l jq jr">const One = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>    ONE<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="2988" class="jm jn hi ji b fi js jp l jq jr">const Punch = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>    Punch<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="6a3d" class="jm jn hi ji b fi js jp l jq jr">ReactDOM.render((<br/>  &lt;Router&gt;<br/>    &lt;Route exact path="/" render={Test} /&gt;<br/>    &lt;Route exact path="/one" render={One} /&gt;<br/>    &lt;Route exact path="/punch" render={Punch} /&gt;<br/>  &lt;/Router&gt;),<br/>  document.getElementById('root')<br/>);</span></pre><p id="920e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你现在在url中输入/one，它将显示单词ONE under test。如果你用punch代替它，它将显示单词punch under test。</p><p id="009a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，让我们添加一些单独的组件，并为它们添加这些路线。</p><p id="bbd4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建两个文件，“Hi.js”和“Bye.js”。</p><p id="1db4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在hi中输入以下代码:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="4e3b" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';</span><span id="362d" class="jm jn hi ji b fi js jp l jq jr">function Hi() {<br/>  return (<br/>    &lt;div&gt;<br/>      Hi<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="1b3d" class="jm jn hi ji b fi js jp l jq jr">export default Hi;</span></pre><p id="622a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是拜拜的内容:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="a6bb" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';</span><span id="0057" class="jm jn hi ji b fi js jp l jq jr">function Bye() {<br/>  return (<br/>    &lt;div&gt;<br/>      Bye<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="91d4" class="jm jn hi ji b fi js jp l jq jr">export default Bye;</span></pre><p id="c5b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将它们都导入“index.js”并添加到渲染中..</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="de9a" class="jm jn hi ji b fi jo jp l jq jr">import Hi from './Hi';<br/>import Bye from './Bye';</span><span id="4afd" class="jm jn hi ji b fi js jp l jq jr">ReactDOM.render((<br/>  &lt;Router&gt;<br/>    &lt;Route path="/" render={Test} /&gt;<br/>    &lt;Route exact path="/one" render={One} /&gt;<br/>    &lt;Route exact path="/punch" render={Punch} /&gt;<br/>    &lt;Route exact path="/hi" component={Hi} /&gt;<br/>    &lt;Route exact path="/bye" component={Bye} /&gt;<br/>  &lt;/Router&gt;),<br/>  document.getElementById('root')<br/>);</span></pre><p id="1790" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于组件，将单词render=更改为component=。尽管如此，它仍然可以像渲染一样工作。这里的“嗨”和“再见”的用法与“一”和“打孔”一模一样。</p><p id="cd81" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在添加NavLink，当我们点击不同的部分时，它会改变浏览器的url。</p><p id="94db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">导入导航链接:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="b634" class="jm jn hi ji b fi jo jp l jq jr">import {BrowserRouter as Router, Route, NavLink} from 'react-router-dom'</span></pre><p id="eb7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个导航栏，链接到不同的路径，并将其添加到渲染的顶部。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e91c" class="jm jn hi ji b fi jo jp l jq jr">const Navbar = () =&gt; {<br/>  return (<br/>  &lt;div&gt;<br/>    &lt;NavLink to="/" exact &gt;Test&lt;/NavLink&gt;<br/>    &lt;NavLink to="/one" exact &gt;ONE&lt;/NavLink&gt;<br/>    &lt;NavLink to="/punch" exact &gt;Punch&lt;/NavLink&gt;<br/>    &lt;NavLink to="/hi" exact &gt;Hi&lt;/NavLink&gt;<br/>    &lt;NavLink to="/bye" exact &gt;Bye&lt;/NavLink&gt;<br/>  &lt;/div&gt;<br/>  )<br/>}</span><span id="e871" class="jm jn hi ji b fi js jp l jq jr">ReactDOM.render((<br/>  &lt;Router&gt;<br/>    &lt;Navbar /&gt;<br/>    &lt;Route path="/" render={Test} /&gt;<br/>    &lt;Route exact path="/one" render={One} /&gt;<br/>    &lt;Route exact path="/punch" render={Punch} /&gt;<br/>    &lt;Route exact path="/hi" component={Hi} /&gt;<br/>    &lt;Route exact path="/bye" component={Bye} /&gt;<br/>  &lt;/Router&gt;),<br/>  document.getElementById('root')<br/>);</span></pre><p id="112f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在你可以在任何地方看到链接列表，如果你点击它们，不仅页面会显示你点击的链接，而且顶部的url也会改变！</p><p id="b4c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您还可以使用路线来包装其他东西，如按钮，单击按钮会产生相同的效果。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6cb4" class="jm jn hi ji b fi jo jp l jq jr">const Test = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>    Test<br/>    &lt;NavLink to="/one" exact &gt;<br/>      &lt;button &gt;ONE&lt;/button&gt;<br/>    &lt;/NavLink&gt;<br/>    &lt;NavLink to="/punch" exact &gt;<br/>      &lt;button &gt;PUNCH&lt;/button&gt;<br/>    &lt;/NavLink&gt;<br/>    &lt;NavLink to="/hi" exact &gt;<br/>      &lt;button &gt;Hi&lt;/button&gt;<br/>    &lt;/NavLink&gt;<br/>    &lt;NavLink to="/bye" exact &gt;<br/>      &lt;button &gt;Bye&lt;/button&gt;<br/>    &lt;/NavLink&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="d6e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你给它们添加链接和按钮，现在你有一堆按钮，当按下时会改变显示！现在，您可以使用这些链接按钮来触发页面和url到不同组件的更改，而不是仅仅依靠更新状态来更改它！</p><p id="6536" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一件事！如果你有一个像商店一样的东西，在商店区域内，你可以点击不同的东西，如“购买”或“出售”，这将改变商店内的一些东西，但外面的区域保持不变。在这种情况下，您并没有更改整个页面，只是更改了商店部分。这将是一个嵌套的链接，而不是从“购物”到“购买”，而是从“购物”到“购物/购买”。让我们设置组件。</p><p id="186e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">再做两个文件。“Hi2.js”和“Hi3.js”。(这些真的是很有创意的名字吧？)</p><p id="7304" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“Hi2”应该是这样的:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="be83" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';</span><span id="b347" class="jm jn hi ji b fi js jp l jq jr">function Hi2() {<br/>  return (<br/>    &lt;div&gt;<br/>      Hi2<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="656c" class="jm jn hi ji b fi js jp l jq jr">export default Hi2;</span></pre><p id="4709" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">“Hi3.js应该是这样的:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e5d4" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';</span><span id="0724" class="jm jn hi ji b fi js jp l jq jr">function Hi3() {<br/>  return (<br/>    &lt;div&gt;<br/>      Hi3<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="c0f2" class="jm jn hi ji b fi js jp l jq jr">export default Hi3;</span></pre><p id="672e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们通过导入Hi的2和3来更新我们原来的“Hi.js”文件。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d283" class="jm jn hi ji b fi jo jp l jq jr">import React from 'react';<br/>import Hi2 from './Hi2';<br/>import Hi3 from './Hi3';<br/>import { Link, Route } from 'react-router-dom';</span><span id="7342" class="jm jn hi ji b fi js jp l jq jr">function Hi(props) {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link to={`${props.match.url}/hi2`}&gt;<br/>        &lt;button&gt;H2 BUTTON&lt;/button&gt;<br/>      &lt;/Link&gt;<br/>      &lt;br/&gt;<br/>      &lt;Link to={`${props.match.url}/hi3`}&gt;<br/>        &lt;button&gt;H3 BUTTON&lt;/button&gt;<br/>      &lt;/Link&gt;</span><span id="c9e8" class="jm jn hi ji b fi js jp l jq jr">      &lt;Route path={`${props.match.url}/hi2`} component={Hi2} /&gt;<br/>      &lt;Route path={`${props.match.url}/hi3`} component={Hi3} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="8355" class="jm jn hi ji b fi js jp l jq jr">export default Hi;</span></pre><p id="15c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们正在创建两个按钮，并将它们包装在由react-router-dom提供的Link中，并在底部设置路由。传入的props包含match.url包含到目前为止将您带到页面的当前链接，因此您只需在之后添加嵌套部分。</p><p id="5a70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果你点击其中一个按钮，它也应该显示“Hi2”或“Hi3”，这取决于你点击了哪一个按钮！</p><p id="9266" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi">…</p><p id="6b51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么都没出现？</p><p id="4f73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回想一下我们的index.js。当我们为“Hi”组件设置路由时，我们键入:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="8c66" class="jm jn hi ji b fi jo jp l jq jr">&lt;Route exact path="/hi" component={Hi} /&gt;</span></pre><p id="431a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们使用了精确的路径来创建它，所以如果你在“/hi”后面输入随机的mumbo-jumbo，它就会失败。但是这实际上同样使得嵌套链接不起作用！将“精确路径”改为“路径”。现在一切都应该完全按照预期运行了！</p><p id="f081" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是react路由的基础！现在，这使您能够后退和前进，如果人们想要跳转到特定的页面，他们现在只需在url中键入他们想要的页面，而不必点击浏览，这大大提高了用户体验！祝你用你新学到的自定义路由知识制作应用程序好运！</p></div></div>    
</body>
</html>