# 管理发布软件中的缺陷

> 原文：<https://medium.com/swlh/managing-defects-in-released-software-4eb253f7f5c9>

## 来自“软件工程烹饪书”系列——如何处理客户报告的问题而不偏离计划的软件开发工作

“软件工程食谱”系列的又一篇文章，针对成长中的工程团队。今天，我们将讨论如何以最有效的方式处理客户或知名利益相关方报告的问题。但首先，一个虚构的故事，基于发生在我早期团队中的真实事件。

![](img/b2a7aab0c3ef29408fff1ff07eb70589.png)

Photo by [Headway](https://unsplash.com/@headwayio?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **Unikorn Inc .发布新功能**

我很高兴一切都结束了。过去的两个月太疯狂了。我们一直在加班加点，以获得猫条纹匹配功能的测试版，我们终于在上周四。现在我终于可以和印花棉布说再见了，至少暂时是这样。

测试阶段很有趣。早在六个月前，我们就发布了与早期采用者子集相匹配的猫条纹，此后我们一直在迭代。最初的几个冲刺还可以，没有太多来自测试池的骚动。直到测试进行到一半的时候，我们才开始收到关于这个特性的反馈和错误报告。

看起来早期采用者密集地使用了新功能，并且普遍喜欢它，但有时它只是将应用程序挂在他们的 iPhone 上，他们不得不取消它才能再次运行。

我们查看了几次，并在此过程中向客户端添加了一些潜在的修复。这有点东拼西凑，但最终似乎该功能在最后两周稳定了下来。我希望现在我们已经向整个客户群发布了，它不会突然中断。摸木头。

让我检查一下仪表板。是的，一切看起来都很好。唷。

*【丁】—松弛警报，#开发通道 *

为什么有人在 Slack 上发布 YouTube 视频？这是什么？哦，嘘…昨晚有人在 YouTube 上传了一个视频，视频中猫的条纹在他们的 iPhone 上匹配死亡。我猜今天是救火日。好玩！我本来计划今天午休时间长一点，和安妮、亚历克斯一起去新开的素食汉堡店。看来我得取消了… =(

—马蒂尔达

![](img/b1ccb01b9e839041cda6684e661db079.png)

Photo by [Markus Spiske](https://unsplash.com/@markusspiske?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **不完全好**

没有人是完美的。无论团队和过程有多好，你迟早都要处理已经发布给客户的软件中的缺陷。

这些缺陷可能是最终用户自己发现的，也可能是在销售演示/其他公司活动中出现的，其潜在影响从简单的尴尬到严重的业务财务后果不等。因此，迅速有效地处理这些问题非常重要。

良好的内部和外部沟通也至关重要，尤其是对于更严重的问题，因为在面临此类挑战时，这可以大大有助于维持客户的信任和挽救公司的声誉。

但是，我们今天不会讨论危机沟通和解决方案。我们将研究我们可以在工程团队中实施的流程，以便在合理的时间框架内解决问题，同时尽量减少对已计划工作的干扰。

![](img/2a78803961c25d36f88c6a1565f7d9b6.png)

Photo by [Pim Chu](https://unsplash.com/@pimchu?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **分类问题**

报告问题时，首先要做的是正确评估它对用户群的影响。这是客户支持团队、工程和产品管理部门的共同努力，以确定受影响的人口统计数据和问题的范围。

在工程方面，我们可以建立一个第三线支持团队来协助此类工作和客户支持团队的其他升级，或者我们可以在必要时依靠质量保证/工程团队，这取决于预算和可用性。

该团队应在合理的时间框架内对问题进行分类，同时根据全面调查和潜在解决方案的预计时间表，为请求的发起者设定正确的期望值。

在这种情况下，分类意味着首先评估问题的影响和严重性，并寻找潜在的解决方法，以允许用户在出现问题的情况下继续工作。这通常是通过尝试在系统的类似帐户/副本上重现问题(例如，暂存)并检查在重现练习中更改不同参数的影响来完成的。此外，分类还有一个额外的好处，即验证原始上报报告中提供的信息的完整性，允许我们在采取进一步行动之前，根据需要请求额外的输入。

一旦确定了问题的影响和严重性，就可以安排进一步的调查和修复。在未来的 sprint 中，低影响问题可以被安排为“错误修复和小改进”队列的一部分，而更严重的问题通常会跳过这个队列，更快地到达有经验的工程师面前，根据需要中断或重新安排其他工作。

报告的问题不一定是在实现阶段引入的缺陷。有时它们是由于以不可预见的方式使用系统而产生的，或者仅仅是对预期功能的误解。当有疑问时，有必要让产品团队参与到分类阶段，以确认对系统的期望。这可能会导致将问题归类为需要在更广泛的产品路线图环境中进一步考虑和确定范围的增强，或者只是发布相关最终用户文档的更新。两者都是有效的解决方案，不需要工程方面的进一步工作。

![](img/67a392f9ab2569e4ff46cb95605074a0.png)

Photo by [Fatos Bytyqi](https://unsplash.com/@fatosi?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **工程师的调查**

被确定为系统缺陷的问题最终应分配给具有相关专业知识的工程师进行进一步调查并制定解决方案。

当执行这项工作时，工程师将需要使用一个环境，在这个环境中他们可以看到问题并跟踪相关的代码路径。通常，这个环境将是一个副本系统，如果仍然可用的话，可能是在分类期间使用的相同系统，其中问题可以预见地表现出来。

有时，对副本系统进行调查是不可行的，例如，如果问题与生产环境紧密相关，或者如果它只针对一组特定的客户数据。在这种情况下，工程师需要访问生产系统来执行他们的调查。

当涉及实时数据或生产环境时，采取正确的安全保护措施非常重要。这些措施包括尽可能限制系统和数据访问，以及(在相关情况下)在需要使用客户数据时征得客户同意。

如果您目前没有这些方面的政策，最好尽快查看，以避免在停机期间不得不仓促应对。记录和授权对实时系统和数据的访问有助于识别安全漏洞，这是行业标准认证的常见要求，如信息安全 ISO 27001。

此外，当处理“活动”系统时，您可能希望通过将工作联合分配给两个工程师来降低意外损坏或中断的风险。在这种情况下，检查表也很有用，它描述了生产环境中适当的“登录”和“注销”步骤，以及关于哪些操作是可接受的以及任何相关政策和程序的指南。

最后，在某些情况下，问题无法可靠地重现，导致工程师看不到或看不到问题。在这种情况下，解决它的可能性大大降低，团队需要决定是尝试一个临时的修复，还是完全放弃它。

这个决定可以与客户支持团队和产品管理一起做出，并且应该基于问题本身的影响和严重性。如果决定尝试一个尝试性的修复，这应该被传达给用户，以设定期望，我们可能需要他们的帮助来解决潜在的修复问题，并且最终我们可能不会达到一个令人满意的解决方案。

![](img/5adb73f729d2881212a666f2c31facbe.png)

Photo by [Kaleidico](https://unsplash.com/@kaleidico?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **决议计划**

调查这个问题应该让我们了解这个问题对代码库的影响，以及为了纠正这个问题需要做哪些更改。

对于简单的更改，工程师在进行调查时通常会直接提供修复方法。对于更复杂的问题，在采用建议的解决方案之前，需要考虑更多因素，其中最突出的是:

*   **变更的程度**:为了解决问题，需要修改多少代码。这对资源规划和软件架构都有影响。
*   **回归** **关注**:解决方案是否会影响不同的组件，或者产生意想不到的副作用。这最好由质量保证/质量工程团队来评估，并且在确定之前可能需要实施解决方案。
*   **版本化**:解决方案如何应用于软件的不同版本。即使在没有定制部署的 SaaS 情况下，我们至少要关心两个版本:生产和当前开发中的 sprint。

根据复杂性，可能值得采用一个类似于技术规范的明确记录的解决方案来记录提议的变更及其影响。然后，这可以通过与其他 sprint 文档相同的批准过程，以再次确保尽我们最大的能力降低风险。

在极端的情况下，例如当我们正在处理一个需要复杂变更才能解决的严重问题时，团队可能会决定直接处理变更，并追溯记录解决方案。这是一种非常危险的方法，应该谨慎使用，因为引入更多缺陷的可能性更高。

![](img/0c2efbea2f357c3a2964dcd527deafb4.png)

Photo by [Dev](https://unsplash.com/@dev_irl?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **短期和长期修复**

当调查这个问题时，团队可能会发现这个问题深深植根于软件的架构中，并且产生适当的修复需要对系统进行广泛的、深远的改变。

在这些情况下，值得研究是否有短期的解决方案可以部分地解决问题，或者至少减轻问题(例如，降低问题发生的频率)。一个有效的方法是实施这些短期修复，并为以后的冲刺计划更长期、更完整的修复。

这种情况下的挑战是在未来的 sprint 计划活动中正确地对这些长期修复进行优先排序，因为未能解决它们可能会导致不稳定性的累积，最终可能会扼杀系统。

确保长期修复得到正确关注的一个好方法是将它们作为故事添加到产品待办事项列表的顶部，并附上合适的解释。但是，它们的优先级可能会在规划时更改，例如，当它们涉及不推荐使用的组件时，或者当相关功能没有被客户广泛使用时。

出于这个原因，我的建议是只在必要时使用短期修复，并且只在它们不会破坏整个系统架构时使用。我们不能以快速修复的名义牺牲代码质量，因为从长远来看这会增加系统的不稳定性。

![](img/c55b053dfff18f4acb0a6ef10c129d41.png)

Photo by [Tim van der Kuip](https://unsplash.com/@timmykp?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **发布修复**

根据解决方案，无论是正式的还是非正式的，我们都需要决定是否在完成后将问题直接部署到生产环境(和其他环境，如果适用的话)，或者是否等待下一个预定的发布。这又是一次与产品管理部门和客户支持部门一起进行的拜访，取决于许多因素，如客户(不)满意度以及问题的范围/严重性。

从工程的角度来看，在准备和执行发布本身的固定成本之外，进行不按计划的发布会有一个动态成本组成部分，它与整个系统的变化影响成比例，并由签署前要进行的测试量决定。这个总成本越高，我们就越有可能影响当前的 sprint，改变它的范围和相关的承诺。

当决定是否进行一个计划外的发布时，这种影响应该被评估并与其他团队交流，因为它可能不会在工程之外立即显现出来。

![](img/85da9e96c8baf57beb55b9314bc2c697.png)

Photo by [Carlos Muza](https://unsplash.com/@kmuza?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## **跟进临时修复**

在发布试验性修复时，添加额外的日志记录或监控指标是一个很好的做法。这有助于团队在生产环境中再次触发问题时更详细地诊断问题。

然而，很容易忘记跟踪这些修复，经常导致诊断信息被例行地忽略，堵塞日志和度量仪表板。

为了缓解这个问题，明智的做法是在诊断卫生方面投入一些工程时间。这包括:

*   检查日志/仪表板中有关间歇性问题的信息。如果发现任何问题，应该提出来进行进一步的调查，并在当前 sprint 中相应地安排时间。
*   移除不赞成使用的检测。虽然一个问题不太可能自己解决，但是如果没有人遇到它，它也不太可能需要关注。因此，诊断仪器应该有一个“保存期限”,如果不使用的话，在设定的冲刺次数后将其移除。

暂时的修复应该被认为是临时的解决方案，一旦对问题有了更彻底的了解，并确定了根本原因，就应该用更永久的改变来代替。

![](img/912294281987fd605db24ae5b42c2d4a.png)

Photo by [Jesus Kiteque](https://unsplash.com/@jesuskiteque?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

谢谢你坚持到文章结束。希望您已经发现这是一本有趣的读物，对您自己的缺陷升级过程有一些有用的启发。

在处理生产环境中的问题时，您遇到的主要问题是什么？请在下面的“回复”部分分享它们，我会很乐意加入讨论。

同时，祝你一路顺风，继续编写高质量的软件！

## **延伸阅读**

如果你是“软件工程食谱”的新手，欢迎加入！下面是一些更深入的文章，可以帮助您入门，并减少在软件对外发布后才发现缺陷的可能性:

*   [计划和评估](/swlh/planning-and-estimation-11e59ac1956b):关于计划冲刺和评估所涉及的工作。有助于确保团队有足够的时间正确完成工作。
*   [技术文档](/swlh/technical-documentation-2096c96ecd5a):为什么这是软件工程的一个重要方面，以及如何充分利用它。
*   [保持敏捷:冲刺](/swlh/staying-agile-running-a-sprint-ad4b3d9bb5f):冲刺过程入门。