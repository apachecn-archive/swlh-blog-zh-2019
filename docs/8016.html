<html>
<head>
<title>JetBrains DataGrip Explain Plan</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JetBrains DataGrip解释计划</h1>
<blockquote>原文：<a href="https://medium.com/swlh/jetbrains-datagrip-explain-plan-ac406772c470?source=collection_archive---------4-----------------------#2019-07-10">https://medium.com/swlh/jetbrains-datagrip-explain-plan-ac406772c470?source=collection_archive---------4-----------------------#2019-07-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/110a4186747bbc37c2515164b046ab15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*knsItwDl-z1G6h-zKz3fFA.png"/></div></div></figure><p id="f47d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我最近做了一个小任务，要求我提高页面加载或该页面的查询加载的性能。<br/>我立即投入其中，试图找到分析我的查询的方法，因为我已经在使用<a class="ae jo" href="https://www.jetbrains.com/datagrip/" rel="noopener ugc nofollow" target="_blank"> DataGrip </a>来处理数据库相关的东西，我决定检查他们有什么来分析查询。很明显，他们有一个叫做“解释计划”的东西，如果你熟悉MySQL的话，这没什么不同。但是，他们只是试图以不同的方式形象化它，或者以不同的方式展示它。<br/>所以，基本上，我将解释MySQL <code class="du jp jq jr js b">Exaplin</code>是如何工作的，这足以让你理解DataGrip向你展示了什么。</p><p id="f15f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">没有更多的介绍，让我们直接进入它。</p><h1 id="6cd9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是“解释计划”</h1><h2 id="8a5b" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jb ky kz kh jf la lb kl jj lc ld kp le bi translated">解释计划的输出表是什么</h2><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/ca4df040e60d81d7a0cf9c91d45d7dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P7ofDmVXaIIawAcSYlOqTg.png"/></div></div></figure><p id="5b36" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您运行“解释”部分，您可以看到更好的信息，如下所示:</p><figure class="lg lh li lj fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lf"><img src="../Images/5925dc46b3b0bf4bd15f8606805bb3e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OacueTSLAFwSaHRDKd60A.png"/></div></div></figure><p id="73bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们解释一下桌子里面有什么。</p><h2 id="2b2d" class="kr ju hi bd jv ks kt ku jz kv kw kx kd jb ky kz kh jf la lb kl jj lc ld kp le bi translated">表格列和说明</h2><ul class=""><li id="aa50" class="lk ll hi is b it lm ix ln jb lo jf lp jj lq jn lr ls lt lu bi translated"><strong class="is lv"> id <br/> </strong>这个ID将代表MySQL将要按顺序执行的语句的ID。如果您有一个普通的查询，您只会看到1。但是，如果您有一个连接查询和一个子查询，您会注意到它会显示主查询，然后是子查询2nd，然后是连接3rd。知道顺序很重要；).</li><li id="a6d5" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">选择类型</strong> <br/>为此，它可以是下列值之一(焦点是[]):<br/>—子查询:ex。(select actor_id，[select … from..etc]如表中之物)<br/> —派生:例如。select * from[select * from something _ else]<br/>—Union:join、Union或诸如此类命令<br/> — Union Result:它连接所有连接结果的地方。</li><li id="8cb9" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">Table</strong>Table<br/>这将引用它为当前查询获取数据的表，有时它说代替表名&lt; derived4 &gt;意味着这个连接将等待它的内部命令id=4作为获取数据的表。通常，join命令总是这样。</li><li id="f078" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">型</strong> <br/>有人说其叫<code class="du jp jq jr js b">access_type</code>， 这些类型是:<br/> — ALL:通过正常扫描(正常选择查询)在表中查找数据<br/> — index:通过索引列查找数据(这种方式很好)<br/> — range:意味着它可以基于索引列限制结果并获取一个范围(快速查询)<br/> — ref:意味着这将匹配来自其他表的ref<br/>—eq _ ref:如果ref是唯一键，意味着它将在匹配行的那一刻停止<br/> — const，system:匹配a</li><li id="8046" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">可能的键</strong> <br/>这将尝试获取查询中使用的所有列，并将它们用作可能的列来过滤或用于执行。</li><li id="d688" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">关键字</strong><br/>MySQL决定用来优化所需数据访问的一个索引。</li><li id="8264" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">Key _ len<br/>T7】MySql将在索引中使用的字节数。基于这个值，如果没有使用表中分配的字节，您可以调整查询以减少影响，或者将表的结构更改为更好的结构。</strong></li><li id="9244" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv"> Ref <br/></strong></li><li id="6400" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv">行数<br/></strong>MySQL估计需要读取的行数，以找到所需的行。</li><li id="0e5d" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv"> Filtered </strong> <br/>使用where条件或类似条件过滤的行的百分比。如果您将这个与<code class="du jp jq jr js b">rows</code>相乘，您将得到这个查询将返回到前面查询的行数。</li><li id="a03b" class="lk ll hi is b it lw ix lx jb ly jf lz jj ma jn lr ls lt lu bi translated"><strong class="is lv"> Extra <br/> </strong>这包含一些额外的变量数据，如(` Using index` <code class="du jp jq jr js b">,</code> `Using where '..)显示了过滤和数据挑选将如何进行。在文档中了解更多信息。</li></ul></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><p id="e710" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is lv">【更新】:</strong></p><h1 id="aad3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">MySQL 8.0</h1><p id="481b" class="pw-post-body-paragraph iq ir hi is b it lm iv iw ix ln iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hb bi translated">在MySQL 8.0.18之前，你可以在上面看到的解释主要是由引擎完成的估计。但是，现在在MySQL 8中，它实际上运行查询并找到更准确的结果。</p><pre class="lg lh li lj fd ml js mm mn aw mo bi"><span id="4ffa" class="kr ju hi js b fi mp mq l mr ms">mysql&gt; explain analyze select count(*) from sbtest1 where k &gt; 500000\G<br/>*************************** 1. row ***************************<br/>EXPLAIN: -&gt; Aggregate: count(0) (actual time=178.225..178.225 rows=1 loops=1)<br/>-&gt; Filter: (sbtest1.k &gt; 500000) (cost=98896.53 rows=493204) (actual time=0.022..147.502 rows=625262 loops=1)<br/>-&gt; Index range scan on sbtest1 using idx3 (cost=98896.53 rows=493204) (actual time=0.021..96.488 rows=625262 loops=1)</span><span id="5a11" class="kr ju hi js b fi mt mq l mr ms">1 row in set (0.18 sec)</span></pre><p id="d7a1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mu">上面的例子摘自下面的文章</em></p><p id="e887" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里的这篇文章恰当地解释了所有的输出:</p><div class="mv mw ez fb mx my"><a href="https://www.percona.com/blog/2019/10/28/using-explain-analyze-in-mysql-8/" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="hj b fi z dy nd ea eb ne ed ef hh bi translated">在MySQL 8 - Percona数据库性能博客中使用解释分析</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">在MySQL 8.0.18中有一个名为解释分析的新特性，而多年来我们大多只有传统的…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">www.percona.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm io my"/></div></div></a></div></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><h1 id="9857" class="jt ju hi bd jv jw nn jy jz ka no kc kd ke np kg kh ki nq kk kl km nr ko kp kq bi translated">摘要</h1><p id="ce30" class="pw-post-body-paragraph iq ir hi is b it lm iv iw ix ln iz ja jb mi jd je jf mj jh ji jj mk jl jm jn hb bi translated">根据上面的信息，您可以注意到，如果您利用被触摸的行数、被过滤的行数，并且如果有可能的话，您的键列将帮助您改进您的查询。</p><p id="97d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你知道如何阅读这些数据，并能够利用这些数据，你将能够改善你的查询和你的网站。</p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><p id="a5b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当然，如你所见，这只是一个非常基本的简单解释，如果你想了解更多，请阅读MySQL的详细文档:</p><div class="mv mw ez fb mx my"><a href="https://dev.mysql.com/doc/refman/8.0/en/explain-output.html" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="hj b fi z dy nd ea eb ne ed ef hh bi translated">MySQL :: MySQL 8.0参考手册::8.8.2解释输出格式</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">您可以通过对……的行列中的值进行乘积来很好地了解连接的好坏</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">dev.mysql.com</p></div></div></div></a></div></div></div>    
</body>
</html>