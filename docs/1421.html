<html>
<head>
<title>Build an AI to play F1-race</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立一个人工智能来玩F1比赛</h1>
<blockquote>原文：<a href="https://medium.com/swlh/build-an-ai-to-play-f1-race-64f078a3fce2#2019-03-05">https://medium.com/swlh/build-an-ai-to-play-f1-race-64f078a3fce2#2019-03-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/603c23e5719cc3cd0611b23258f2d4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XpYwjwbfCiHuomcZ4a73Tg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx">The F1-race classic</figcaption></figure><blockquote class="iu"><p id="edc0" class="iv iw hi hj ix iy iz ja jb jc jd je dx translated">真的吗？一个AI玩F1赛车游戏？算是吧。这个故事更像是一个助手指南，而不是构建整个系统的教程。</p></blockquote><p id="0dbe" class="pw-post-body-paragraph jf jg hi jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb je hb bi translated">我把它作为一个实验项目开始，并建立了一些基础，你可以通过贡献进一步改进。</p><p id="ae35" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated"><a class="ae kh" href="https://github.com/adesgautam/AI-race" rel="noopener ugc nofollow" target="_blank"> <strong class="jh ki">链接到Github回购</strong> </a></p><h1 id="7af3" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">F1赛车游戏</strong></h1><p id="f809" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">所以，让我们先来谈谈这个游戏。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es lm"><img src="../Images/db66bfc095ead06f56ca10fcb898d887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*OnC4rPq2R6CVvPzls7BCIg.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">F1-race gameplay</figcaption></figure><p id="4a02" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">F1赛车游戏于1984年由任天堂 (NES)发行。</p><p id="2323" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">游戏包括一辆赛车，它可以在3条赛道上运行，按照难度级别1、2和3进行分类。</p><p id="9ce4" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">目标是在40秒的时间内完成赛道。赛道有一些急转弯，还有一些更多的车，让游戏变得有点有趣。</p><p id="62b9" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">有4个控制:向前，向后，向左和向右。也允许两个控件的组合，如向前-左、向前-右。</p><h1 id="2ded" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">这个计划</h1><p id="781f" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">我们将把这个问题转化为一个监督学习任务(<strong class="jh ki">图像- &gt;标签</strong>)。</p><p id="c0a5" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">我们将建立的管道如下:</p><ol class=""><li id="6397" class="lr ls hi jh b ji kc jm kd jq lt ju lu jy lv je lw lx ly lz bi translated">使用模拟器收集数据(游戏帧和键盘按压)。</li><li id="c889" class="lr ls hi jh b ji ma jm mb jq mc ju md jy me je lw lx ly lz bi translated">准备数据(裁剪图像和准备标签)。</li><li id="da26" class="lr ls hi jh b ji ma jm mb jq mc ju md jy me je lw lx ly lz bi translated">训练<strong class="jh ki"> CNN模型</strong>。</li><li id="528d" class="lr ls hi jh b ji ma jm mb jq mc ju md jy me je lw lx ly lz bi translated">测试预测。</li><li id="eda7" class="lr ls hi jh b ji ma jm mb jq mc ju md jy me je lw lx ly lz bi translated">制作模型在模拟器上玩游戏。</li></ol><h1 id="9e8f" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak"> 1。收集数据</strong></h1><p id="1fcd" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">我将使用<strong class="jh ki"> OpenEmu </strong>模拟器在Mac上运行F1赛车游戏。如果你在另一个操作系统上，你可以使用<a class="ae kh" href="http://www.nintendoemulator.com/nes/4099" rel="noopener ugc nofollow" target="_blank">这个网站</a>在浏览器中运行游戏。我们将使用<a class="ae kh" href="https://github.com/adesgautam/AI-race/blob/master/grabScreen.py" rel="noopener ugc nofollow" target="_blank">这个脚本</a>来抓取游戏截图，同时按下键盘。</p><p id="37e4" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">在设置游戏抓取截图的窗口区域时要小心。</p><p id="c1a5" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">所有的图像都将保存在<strong class="jh ki"> pics1 </strong>目录中，并且会创建一个<strong class="jh ki"> CSV </strong>文件，其中包含图像路径和按键。</p><p id="816c" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">尽量收集越来越多的数据。我只尝试了10k张图片。</p><h1 id="85f1" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">2.准备数据</h1><p id="e788" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">这里参考<a class="ae kh" href="https://github.com/adesgautam/AI-race/blob/master/prepare_data.py" rel="noopener ugc nofollow" target="_blank">剧本</a>。</p><p id="4a24" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">这里，图像将被裁剪以仅获得图像的相关部分。</p><figure class="ln lo lp lq fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/ad147b4952bcabfb263a0941de68a2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*LG9dfaokCMSgx7O2Z9l5aA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx">cropped image</figcaption></figure><p id="5921" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">之后，它们将被调整为64x64或32x32或你选择的尺寸。请记住，图像的大小将反映用于训练模型的计算能力。</p><p id="4a87" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">标签将被转换成<strong class="jh ki">一键编码</strong>。</p><h1 id="79fd" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">训练模型</h1><p id="d911" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">现在，我们将根据我们准备的数据训练一个<strong class="jh ki"> CNN模型</strong>。</p><p id="bb9a" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated"><a class="ae kh" href="https://github.com/adesgautam/AI-race/blob/master/models.py" rel="noopener ugc nofollow" target="_blank">这个文件</a>包含了4个CNN模型来进行实验。</p><p id="f5c3" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">这个脚本训练模型并绘制出<strong class="jh ki">损失</strong>和<strong class="jh ki">准确度</strong>图。</p><p id="e80a" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">我使用<strong class="jh ki"> models.py </strong>文件中的<strong class="jh ki"> CNN Model2 </strong>对<strong class="jh ki"> 10k图像</strong>进行了训练，在使用尺寸为<strong class="jh ki"> 32x32 </strong>的<strong class="jh ki"> RGB </strong>图像的测试数据上获得了<strong class="jh ki"> 81% </strong>的准确率。</p><h1 id="8b41" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">玩游戏</h1><p id="f794" class="pw-post-body-paragraph jf jg hi jh b ji lh jk jl jm li jo jp jq lj js jt ju lk jw jx jy ll ka kb je hb bi translated">要玩这个游戏，请参考<a class="ae kh" href="https://github.com/adesgautam/AI-race/blob/master/play.py" rel="noopener ugc nofollow" target="_blank">这个脚本</a>。</p><p id="ca64" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">记住<strong class="jh ki"> OpenEmu </strong>不允许从脚本到窗口的直接键盘输入。因此，我们将在这里使用浏览器模拟器<a class="ae kh" href="http://www.nintendoemulator.com/nes/4099" rel="noopener ugc nofollow" target="_blank">和</a>。</p><p id="fe37" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">小心地将浏览器窗口放在合适的位置以便截图。</p><p id="fa94" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">尽管我得到了大约81%的准确率，但这个模型的游戏性并不好。它需要许多改进。</p><p id="a5a7" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">但是，我试图建立一个<strong class="jh ki">管道</strong>来构建系统，这也可以用于其他游戏，其中游戏问题可以转换为<strong class="jh ki">监督学习任务</strong>。</p><p id="f0f8" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">随意叉<a class="ae kh" href="https://github.com/adesgautam/AI-race" rel="noopener ugc nofollow" target="_blank"> <strong class="jh ki">回购</strong> </a>为项目做贡献。</p><p id="0f72" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">在模型进一步改进之后，我将向您展示这个故事的下一部分。</p></div><div class="ab cl mg mh gp mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hb hc hd he hf"><p id="9e15" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">请点击👏按钮，如果你喜欢这个帖子，拿着它给更多的爱。</p><p id="5b2d" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated">如果您希望连接:</p><p id="92ca" class="pw-post-body-paragraph jf jg hi jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je hb bi translated"><a class="ae kh" href="https://github.com/adesgautam" rel="noopener ugc nofollow" target="_blank"><strong class="jh ki">Github</strong></a><strong class="jh ki"/><a class="ae kh" href="https://www.linkedin.com/in/adesh-gautam-518810127/" rel="noopener ugc nofollow" target="_blank"><strong class="jh ki">LinkedIn</strong></a><strong class="jh ki"/><a class="ae kh" href="https://twitter.com/gautamades" rel="noopener ugc nofollow" target="_blank"><strong class="jh ki">Twitter</strong></a><strong class="jh ki"/><a class="ae kh" href="https://www.instagram.com/adeshgautam/" rel="noopener ugc nofollow" target="_blank"><strong class="jh ki">Instagram</strong></a></p><figure class="ln lo lp lq fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mn"><img src="../Images/308a8d84fb9b2fab43d66c117fcc4bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqDjlKFwScoQYQ62DWEdig.png"/></div></a></figure><h2 id="c148" class="mo kk hi bd kl mp mq mr kp ms mt mu kt jq mv mw kx ju mx my lb jy mz na lf nb bi translated">这篇文章发表在<a class="ae kh" href="https://medium.com/swlh" rel="noopener"> The Startup </a>上，这是Medium最大的创业刊物，拥有+431，678名读者。</h2><h2 id="869c" class="mo kk hi bd kl mp mq mr kp ms mt mu kt jq mv mw kx ju mx my lb jy mz na lf nb bi translated">在这里订阅接收<a class="ae kh" href="https://growthsupply.com/the-startup-newsletter/" rel="noopener ugc nofollow" target="_blank">我们的头条新闻</a>。</h2><figure class="ln lo lp lq fd ij er es paragraph-image"><a href="https://medium.com/swlh"><div class="er es mn"><img src="../Images/b0164736ea17a63403e660de5dedf91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ouK9XR4xuNWtCes-TIUNAw.png"/></div></a></figure></div></div>    
</body>
</html>