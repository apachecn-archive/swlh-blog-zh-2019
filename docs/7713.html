<html>
<head>
<title>Headless Raspberry Pi — Installing &amp; Configuring Raspbian</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无头Raspberry Pi —安装和配置Raspbian</h1>
<blockquote>原文：<a href="https://medium.com/swlh/headless-raspberry-pi-part-1-installing-configuring-raspbian-b8714a767259?source=collection_archive---------5-----------------------#2019-07-06">https://medium.com/swlh/headless-raspberry-pi-part-1-installing-configuring-raspbian-b8714a767259?source=collection_archive---------5-----------------------#2019-07-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a31cf723e209509446e31072372d7c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyFMnR6adneHOTTPX-KGWw.jpeg"/></div></div></figure><p id="e0db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以你刚刚得到了一个<a class="ae jo" href="https://www.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank">树莓派</a>——一个微小的<a class="ae jo" href="https://en.wikipedia.org/wiki/System_on_a_chip" rel="noopener ugc nofollow" target="_blank">片上系统</a>，它可以用作任何东西，从日常的台式电脑，到DIY智能家居设备，甚至是驱动世界上下一个突破性医疗硬件的嵌入式控制器。现在你想用它做些酷的事情。让我们实现它吧。</p><p id="9465" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章将带你走出新玩具的第一步。它是从使用<a class="ae jo" href="https://www.raspberrypi.org/products/raspberry-pi-zero-w/" rel="noopener ugc nofollow" target="_blank">树莓派Zero W </a>的角度来写的——但它应该适用于任何树莓派，如果有的话，难度很小。</p><h1 id="0484" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">收集碎片</h1><p id="bb99" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">为了理解这篇文章，你需要一些硬件和软件。</p><h2 id="d5a8" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">硬件</h2><p id="4266" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated"><em class="lg">就个人而言，虽然我链接到了一家声誉很好的流行在线零售商的以下产品，但我敦促您尽可能支持您当地的电子产品商店。此外，许多零售商——实体零售商和仅在线零售商——销售如下所列的产品。</em></p><ul class=""><li id="1013" class="lh li hi is b it iu ix iy jb lj jf lk jj ll jn lm ln lo lp bi translated"><a class="ae jo" href="https://www.adafruit.com/product/3400" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi Zero W </a>(或类似):同样，任何树莓Pi都应该是可用的。你可能想确保有一个带WiFi和蓝牙的——没有“正常”的连接选项会限制你的可能性。</li><li id="abb1" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated"><a class="ae jo" href="https://www.adafruit.com/product/592" rel="noopener ugc nofollow" target="_blank"> Micro-B转USB A线</a>:这将在您的Raspberry Pi和您的电脑之间提供数据和电源连接，允许执行“系留”配置。</li><li id="33e4" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">微型SD卡和读卡器Raspberry Pi没有内置存储器。因此，它的操作系统和数据都必须驻留在插入它的SD卡上。选择一个至少16 GB的，让你的生活更轻松一点。因为我们将使用计算机来闪存SD卡，所以您还需要一种方法来将其连接到您的计算机(例如，内置SD读卡器或外部USB读卡器)。</li><li id="27ae" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">(可选；强烈推荐)<a class="ae jo" href="https://www.adafruit.com/product/3252" rel="noopener ugc nofollow" target="_blank">案例</a>——保护你的树莓派。</li><li id="665e" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">(可选；强烈推荐)<a class="ae jo" href="https://www.adafruit.com/product/1995" rel="noopener ugc nofollow" target="_blank">电源</a> —您的Raspberry Pi可以从您在设置过程中用来连接电脑的数据线上获得电力。但是，如果您希望它在配置后能够自己运行，您需要使用某种电源来打开它。</li><li id="dbdb" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">(可选)<a class="ae jo" href="https://www.adafruit.com/product/1099" rel="noopener ugc nofollow" target="_blank"> Micro-B OTG转母USB A适配器</a> —这只真正适用于Raspberry Pi Zero系列，它没有USB A端口。如果您计划将USB外围设备(如键盘或鼠标)连接到您的Raspberry Pi，您将需要一根特殊的电缆来将其USB端口切换到“主机模式”。默认情况下，Micro-B端口仅允许设备以“从”模式工作。然而，Raspberry Pi Zero系列支持<a class="ae jo" href="https://en.wikipedia.org/wiki/USB_On-The-Go" rel="noopener ugc nofollow" target="_blank">USB On-The-Go</a>——一种在“主机”模式下使用Micro-B端口的硬件协议。如果你打算连接多个外围设备，另一个可以强制设备进入“主机”模式的选项是使用一个<a class="ae jo" href="https://www.adafruit.com/product/2991" rel="noopener ugc nofollow" target="_blank">供电的USB集线器</a>。</li><li id="52e2" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">(可选)<a class="ae jo" href="https://www.adafruit.com/product/2775" rel="noopener ugc nofollow" target="_blank">迷你HDMI转HDMI线缆/适配器</a> —同样，这只真正适用于Raspberry Pi Zero系列，它有迷你HDMI端口，而不是标准端口。如果你想把你的Raspberry Pi连接到屏幕上，你需要这个来利用它的迷你HDMI端口。<em class="lg">注意不是Micro HDMI口，是Mini HDMI口。</em></li></ul><h2 id="2590" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">操作系统</h2><p id="7771" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">你需要一个操作系统镜像来刷新你的SD卡。这将是你的树莓派将运行的操作系统。</p><p id="72ab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本系列选择了<a class="ae jo" href="https://www.raspbian.org/" rel="noopener ugc nofollow" target="_blank"> Raspbian </a>的“light”(又名“headless”)版本，这是一个基于<a class="ae jo" href="https://www.debian.org/" rel="noopener ugc nofollow" target="_blank"> Debian </a>的Linux发行版，为在Raspberry Pi上运行做了很好的调整。Raspbian的可信版本可以在<a class="ae jo" href="https://downloads.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi Foundation的下载页面</a>找到。这一系列选择了他们的<a class="ae jo" href="https://downloads.raspberrypi.org/raspbian/images/raspbian-2019-04-09/" rel="noopener ugc nofollow" target="_blank">2019年4月9日建立的拉斯边伸展</a>。</p><p id="62aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我建议不要使用全新的发行版。例如，在撰写本文时，Raspbian Buster刚刚推出，因此许多软件(例如Docker和Pi-hole)在其上安装和运行时都存在未解决的问题。另一方面，Raspbian Stretch已经推出了大约两年，当时它与上述软件配合得非常好。</p><p id="a2ea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，如果你的互联网连接速度较慢，我建议你通过可信的种子(比如Raspberry Pi Foundation提供的种子)下载发行版映像——这将显著提高你的下载速度。当使用种子时，不要忘记至少以1:1的比例进行播种，以帮助其他下载者像你一样受益。</p><h2 id="6585" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">软件</h2><ul class=""><li id="2d8b" class="lh li hi is b it kn ix ko jb lv jf lw jj lx jn lm ln lo lp bi translated"><a class="ae jo" href="https://www.balena.io/etcher/" rel="noopener ugc nofollow" target="_blank">balena etcher</a>——这是一款跨平台软件，你可以用它将下载的操作系统镜像刷新到你的Raspberry Pi的SD卡上。还有其他软件选项来执行此功能，但这似乎是最容易使用的，也是在撰写本文时最广为人知的。</li><li id="f192" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated"><a class="ae jo" href="https://www.chiark.greenend.org.uk/~sgtatham/putty/" rel="noopener ugc nofollow" target="_blank"> PuTTY </a>(如果在Windows上)——Mac和Linux用户，你不需要这个，因为默认情况下你的系统上已经安装了一个SSH客户端。为了登录并在您的Raspberry Pi上做有趣的事情，您需要SSH到它。为了通过SSH连接到设备，您需要一个SSH客户端，PuTTY是其中的一个选项。</li></ul><h1 id="d0dc" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">准备您的SD卡</h1><p id="4bfa" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">现在你已经收集好了所有的东西，你需要设置你的SD卡。如果没有插着操作系统的SD卡，树莓派只是一个非常糟糕的镇纸。</p><h2 id="15b3" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">步骤1 —将操作系统刷新到SD卡上</h2><p id="bd59" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">这部分相当简单。将您的<em class="lg"> SD卡</em>插入您的计算机——通过您实际计算机上的<em class="lg"> SD卡读卡器</em> r，或者您在上面获得的USB读卡器。</p><p id="c9d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，启动<em class="lg"> balenaEtcher </em>并按照它描述的步骤将你上面下载的操作系统映像刷新到你的SD卡上。</p><p id="fa45" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当这一部分完成后，您的SD卡将自动从您的计算机中弹出。为了继续这篇文章，您需要将其移除并重新连接到您的计算机，使其作为一个名为<em class="lg">“boot”</em>的外部驱动器进行挂载。</p><p id="a4f1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">您不能将下载的操作系统映像直接放在SD卡上，它不会以计算机(如Raspberry Pi)在启动时可以识别的方式进行格式化。balenaEtcher等软件工具可确保执行所有必要的格式化步骤，并确保完成后，SD卡与您下载的操作系统映像的ISO文件所描述的结构相匹配。</em></p><h2 id="8e59" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">步骤2 —初始配置</h2><p id="0a3c" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">现在你的SD卡已经刷新了你下载的操作系统映像，并且已经作为一个名为<em class="lg">“boot”</em>的外部驱动器重新安装到你的计算机上，是时候配置一些初始启动设置了。我们将修改您SD卡上的一些文件。当您的Raspberry Pi第一次从SD卡启动时，它会看到这些文件，并基于它们执行一些特别的配置。这将允许您在第一次启动时连接到您的Raspberry Pi。</p><p id="bec9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在你的电脑上打开一个<em class="lg"> bash </em>(或者类似的)终端，进入你的SD卡的根目录。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="988a" class="ks jq hi md b fi mh mi l mj mk"># Figure out the name of your mounted SD</span><span id="a553" class="ks jq hi md b fi ml mi l mj mk">card. You should expect<!-- --> <br/># this to be something like “boot”. The following command will list<br/># all mounted drives on your computer.</span><span id="a262" class="ks jq hi md b fi ml mi l mj mk">ls -ls /Volumes/<!-- --> </span><span id="74de" class="ks jq hi md b fi ml mi l mj mk"># Actually change into the root directory of your mounted SD card.<br/># Assuming that the name of your SD card is now “boot”, the<br/># following command will get the job done.</span><span id="e5db" class="ks jq hi md b fi ml mi l mj mk">cd /Volumes/boot</span></pre><p id="fe09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在您已经进入了SD卡的根目录，您需要告诉Raspbian在第一次启动时启用SSH。作为安全预防措施，SSH在默认情况下是禁用的。您可以通过简单地创建一个名为<code class="du mm mn mo md b">ssh</code>的空文件来做到这一点。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="8d34" class="ks jq hi md b fi mh mi l mj mk"># The “touch” command in bash will simply create an empty file in<br/># the current directory.</span><span id="7cbb" class="ks jq hi md b fi ml mi l mj mk">touch ssh</span></pre><p id="73ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来实际上是告诉Raspbian让你的Raspberry Pi像USB以太网设备一样工作。这将允许您通过USB将您的Raspberry Pi连接到您的计算机，在您的两个设备之间形成一个小型LAN网络，从而允许您SSH到您的Raspberry Pi并继续其配置。</p><p id="04dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://en.wikipedia.org/wiki/Secure_Shell" rel="noopener ugc nofollow" target="_blank"> <em class="lg"> SSH </em> </a> <em class="lg">是用于与远程设备通信的安全网络协议。由于您的Raspberry Pi在初始启动时不会连接到您的WiFi网络，我们需要创建一种不同的方式来通过网络访问它。告诉它充当USB以太网设备将允许我们在它和您的计算机之间形成一个小型局域网。</em></p><p id="464c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">一种旧的、可以说不太安全的登录“嵌入式”设备的机制已经过时了</em> <a class="ae jo" href="https://en.wikipedia.org/wiki/Serial_port" rel="noopener ugc nofollow" target="_blank"> <em class="lg">序列号</em> </a> <em class="lg">(是的，有点像你用来将打印机连接到现在已经过时的计算机的旧电缆)。市场上有USB转串行适配器，但是坦白地说，本系列中描述的技术比搞乱串行协议更容易——至少在我看来是这样。</em></p><p id="3f8f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">告诉您的Raspberry Pi像USB以太网设备一样工作需要两个步骤。本质上，您将告诉您的设备在启动时加载一个特殊的USB驱动程序，这将使您的Raspberry Pi的Micro-B端口充当以太网适配器。</p><p id="4aab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从SD卡的根目录中，执行以下操作。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="4265" class="ks jq hi md b fi mh mi l mj mk"># Append “<!-- -->dtoverlay=dwc2” to the end of the “config.txt” file.</span><span id="32c4" class="ks jq hi md b fi ml mi l mj mk">echo “dtoverlay=dwc2” &gt;&gt; config.txt</span><span id="3118" class="ks jq hi md b fi ml mi l mj mk"># Modify “cmdline.txt” to cause your device to load the proper<br/># kernel modules for the necessary USB &amp; Ethernet drivers.<br/># <br/># The following command will open the file for editing, but you will<br/># need to manually add “<!-- -->modules-load=dwc2,g_ether” immediately after<br/># “rootwait”. Leave exactly one space before and after this <br/># addition – this file needs to be formatted very specifically to be<br/># interpreted properly.</span><span id="99e3" class="ks jq hi md b fi ml mi l mj mk">nano cmdline.txt</span></pre><h2 id="5ed8" class="ks jq hi bd jr kt ku kv jv kw kx ky jz jb kz la kd jf lb lc kh jj ld le kl lf bi translated">第三步——插上电源</h2><p id="eaed" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果到目前为止您做了所有正确的事情，那么是时候关闭您的终端，弹出您的SD卡，并将其放入您的Raspberry Pi中。如果你想把它放进箱子里，现在也可以。</p><p id="ede7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">用你的Micro-B转USB A线把你的Raspberry Pi插到你的电脑上。确保使用您的Raspberry Pi上的数据端口，而不是仅电源端口——这次您希望它充当您的计算机的USB以太网设备。</p><h1 id="681a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">登录</h1><p id="73b2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">通过USB将您的Raspberry Pi连接到电脑后，可能需要90秒才能完全启动。一般来说，直到它的绿色小指示灯不再闪烁，它才能完全启动。</p><p id="3388" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你认为它是开着的，是时候实际登录了。因为你的树莓Pi充当的是USB以太网设备，应该已经和你的电脑组成了一个小型局域网。</p><p id="4a8d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你在Windows上，你可以使用图形用户界面<em class="lg">PuTTY</em>SSH到你的Raspberry Pi。否则，您需要使用另一个<code class="du mm mn mo md b">bash</code>终端。您的初始登录凭据将是:</p><ul class=""><li id="748b" class="lh li hi is b it iu ix iy jb lj jf lk jj ll jn lm ln lo lp bi translated">用户名:<code class="du mm mn mo md b">pi</code></li><li id="b891" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">密码:<code class="du mm mn mo md b">raspberry</code></li><li id="7bd0" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn lm ln lo lp bi translated">主机名:<code class="du mm mn mo md b">raspberrypi.local</code></li></ul><p id="d233" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">如果您的电脑不支持</em><a class="ae jo" href="https://en.wikipedia.org/wiki/Bonjour_(software)" rel="noopener ugc nofollow" target="_blank"><em class="lg">Bonjour</em></a><em class="lg">，您可能需要使用您的Raspberry Pi的实际内部IP地址作为其主机名。你可以通过多种方式发现这一点，例如使用一个像</em><a class="ae jo" href="https://www.fing.com/" rel="noopener ugc nofollow" target="_blank"><em class="lg">Fing</em></a><em class="lg">这样的应用程序来扫描你的网络以查找连接的设备及其IP地址。</em></p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="b708" class="ks jq hi md b fi mh mi l mj mk"># To SSH into your Raspberry Pi from a Mac or Linux computer, call<br/># the following from a bash terminal.<br/># <br/># Note that the first command simply removes any old SSH keys for<br/># Raspberry Pi devices that are on your computer. You likely don’t<br/># have any, but this will eliminate weird issues you may experience<br/># if you do. As such, it only needs to be run once.<br/># <br/># The second command is what you can use any time you want to SSH<br/># into your device.</span><span id="b042" class="ks jq hi md b fi ml mi l mj mk">ssh-keygen -R raspberrypi.local</span><span id="f457" class="ks jq hi md b fi ml mi l mj mk">ssh pi@raspberrypi.local</span></pre><p id="25bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在同意将您的Raspberry Pi的公共SSH密钥作为友好设备存储在您的计算机上，并可能输入您的密码之后，您应该正在为您的设备进行远程bash会话。</p><h1 id="599d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">基本配置和WiFi连接</h1><p id="e1b6" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">现在，您已经成功登录您的Raspberry Pi，是时候将它连接到您的WiFi网络了。最简单的方法是使用Raspbian的配置向导。要启动它，运行以下命令。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="06ea" class="ks jq hi md b fi mh mi l mj mk"># Fire up the Raspbian/Debian configuration wizard. The “sudo” part<br/># of this command causes it to be run as “root” (e.g. with full<br/># access to the restricted parts of the operating system), a<br/># necessary when dealing with system configurations.</span><span id="6d20" class="ks jq hi md b fi ml mi l mj mk">sudo raspi-config</span></pre><p id="dd77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进入此配置向导后，按照其对话框执行以下操作:</p><ol class=""><li id="259b" class="lh li hi is b it iu ix iy jb lj jf lk jj ll jn mp ln lo lp bi translated">更改您的密码(又名<code class="du mm mn mo md b">pi</code>用户的密码)。这是一项安全预防措施。了解Raspberry Pi的人或者可以访问Google的人可以很快发现默认密码是 <code class="du mm mn mo md b"><em class="lg">raspberry</em></code> <em class="lg">。当然，为了让这些成为有用的信息，它们还需要和你的Raspberry Pi连接到同一个网络。</em></li><li id="0a13" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn mp ln lo lp bi translated">(可选)更改您的主机名。类似<code class="du mm mn mo md b">raspberrypi-one</code>的应该没问题。如果你计划在你的网络上同时有多个Raspberry Pi设备，这是必须的。</li><li id="2ff9" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn mp ln lo lp bi translated">连接到您的WiFi网络。您需要选择您所在的地区(例如“美国”)或监管原因，然后手动输入您的SSID和密码。打字时要格外小心，以免重复这一步。<em class="lg">如果您希望您的Raspberry Pi能够连接多个WiFi网络(例如，如果您家中有WiFi扩展器)，您可以按照实际Raspberry Pi网站上的</em> <a class="ae jo" href="https://www.raspberrypi.org/documentation/configuration/wireless/wireless-cli.md" rel="noopener ugc nofollow" target="_blank"> <em class="lg">说明进行高级配置</em> </a> <em class="lg">。</em></li></ol><p id="1dc3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成上述所有配置后，继续从Raspberry Pi的数据端口拔下Micro-B电缆，并将其插入电源端口。你的Raspberry Pi应该重新启动并连接到你的Wifi网络，而不是用你的电脑创建一个小局域网。</p><h1 id="e3ff" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">无线连接和系统更新</h1><p id="ad25" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">现在，您的Raspberry Pi知道了您的WiFi网络，您应该能够连接到它，而无需通过USB电缆将其连接到您的电脑。这意味着，如果你愿意，你可以通过电源供电，而不是通过你的电脑。</p><p id="a1b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设您的Raspberry Pi和您的计算机在同一个网络上，您应该能够像以前一样SSH到它。如果您在上一节中更改了Raspberry Pi的主机名，请确保使用它。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="6221" class="ks jq hi md b fi mh mi l mj mk"># When connected to the same network as your Raspberry Pi, you can<br/># SSH into it using its new hostname and password.</span><span id="8bd4" class="ks jq hi md b fi ml mi l mj mk">ssh pi@raspberrypi-one.local</span></pre><p id="df22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">远程登录您的Raspberry Pi后，请确认您可以访问互联网。</p><p id="befe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">如果您仍然通过数据USB端口将您的Raspberry Pi连接到电脑，您将无法访问互联网。你必须停止使用你的Raspberry Pi作为USB以太网设备来继续这篇文章——它已经达到了我们的目的。</em></p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="98f0" class="ks jq hi md b fi mh mi l mj mk"># An easy way to confirm access to the internet is to ping a<br/># well-known server, such as Google’s. If the world still exists,<br/># chances are that Google’s servers are still accessible.<br/># <br/># The “-c 5” argument to the ping command below simply tells the<br/># program to only ping Google a max of 5 consecutive times. I have<br/># actually accidentally pinged Google much more than this and<br/># subsequently gotten myself temporarily blacklisted from connecting<br/># to their servers due to a suspected DDoS attack.</span><span id="42b9" class="ks jq hi md b fi ml mi l mj mk">ping -c 5 www.google.com</span></pre><p id="2af4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您收到来自上述命令的数据包，您知道您已连接到互联网。如果没有，在另一个设备上检查你的互联网连接——你实际上能够SSH到你的Raspberry Pi的事实表明，问题不在于你的WiFi连接本身，而是更高级别的东西。</p><p id="bf6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在确认您的Raspberry Pi可以访问互联网后，您需要运行三个命令来更新您的设备及其操作系统。我们将使用<a class="ae jo" href="https://en.wikipedia.org/wiki/APT_(Package_Manager)" rel="noopener ugc nofollow" target="_blank"> APT </a>，Debian——也就是Rasbian的——包管理器。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="5602" class="ks jq hi md b fi mh mi l mj mk"># Retrieve the latest lists of available packages.</span><span id="2d89" class="ks jq hi md b fi ml mi l mj mk">sudo apt-get update</span><span id="0ba3" class="ks jq hi md b fi ml mi l mj mk"># Upgrade regular software components to their most current<br/># versions.</span><span id="1334" class="ks jq hi md b fi ml mi l mj mk">sudo apt-get upgrade</span><span id="4a65" class="ks jq hi md b fi ml mi l mj mk"># Upgrade your operating system to the latest-available version of<br/># its release. This will not upgrade you to the next release, it<br/># will simply apply patches (e.g. for security) to your<br/># currently-installed release.</span><span id="86cf" class="ks jq hi md b fi ml mi l mj mk">sudo apt-get dist-upgrade</span></pre><p id="f9f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">我建议经常运行这些命令，以确保您的设备拥有最新的安全补丁。</em></p><p id="bbcf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的树莓Pi现在应该完全是最新的了。此时重启设备通常是一个好主意——一些软件只有在重启时才会重新加载(或者通过手动输入的命令，这比简单的重启更繁琐)。</p><h1 id="100a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">区域设置配置</h1><p id="509c" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">本文将带您完成的最后一步是配置您的Raspberry Pi的区域设置。网上有很多关于做这件事的混乱信息，但如果你知道自己在做什么，这并不太复杂。</p><p id="da7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">操作系统的区域设置控制着许多事情——它期望的键盘布局、它在运行的程序上显示的翻译、它显示和处理货币和浮点数的方式，等等。如果你跳过这一步，这并不是世界末日，但是当你在这里的时候，你也可以这样做。</p><p id="b6fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">再次打开Raspbian的配置向导，进入“本地化设置”菜单。提醒一下，您可以用下面的命令打开向导。</p><pre class="ly lz ma mb fd mc md me mf aw mg bi"><span id="3a1b" class="ks jq hi md b fi mh mi l mj mk">sudo raspi-config</span></pre><p id="2491" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个菜单中，你需要做两件事:</p><ol class=""><li id="875d" class="lh li hi is b it iu ix iy jb lj jf lk jj ll jn mp ln lo lp bi translated">配置您的时区。<em class="lg">这将影响您设备的系统时间。要查看它认为现在是什么时间，可以运行</em> <code class="du mm mn mo md b"><em class="lg">date</em></code> <em class="lg">命令。因为你的设备上可能没有实时时钟，运行在其上的一个名为</em> <code class="du mm mn mo md b"><em class="lg">timesyncd</em></code> <em class="lg">的软件通过</em> <a class="ae jo" href="https://en.wikipedia.org/wiki/Network_Time_Protocol" rel="noopener ugc nofollow" target="_blank"> <em class="lg"> NTP </em> </a> <em class="lg">从互联网上检索当前时间。如果您的设备没有连接到互联网，您就不能指望它的已知时间是正确的。</em></li><li id="ff0d" class="lh li hi is b it lq ix lr jb ls jf lt jj lu jn mp ln lo lp bi translated">配置您的区域设置。使用空格键取消选择任何不适用于您的区域设置，并选择其他适用的区域设置。无论你选择什么样的语言环境，都选择“UTF-8”版本——你可能只有一个适合你的语言环境。<em class="lg">举个例子，我选择了“en_US。UTF-8 UTF-8“因为我住在美国。</em></li></ol><p id="da3e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成此配置步骤后，您应该不需要重新启动设备。</p></div><div class="ab cl mq mr gp ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hb hc hd he hf"><p id="6ff8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您现在有了一个运行Raspbian的完全配置的Raspberry Pi。您应该能够随时通过SSH访问它，并在许多不同的项目中使用它——这方面有许多在线和印刷的演练。</p><p id="525a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你打算用你的设备做任何安全敏感的事情，你可能想要根据常规的Linux安全指南来加强它。</p><p id="b55a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is mx"> <em class="lg">作者注:</em> </strong> <em class="lg">我原本计划这是一个系列，而不是一篇一次性的文章，但时间占了我的上风。我真的希望这篇文章能够成为任何希望深入到构建酷东西世界的人的坚实起点。我想向所有一直在等待这个系列的下一部分的人道歉——如果我有机会给它它应得的和需要的时间，我保证我会的。</em></p><p id="eae2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">股票图片本文顶部感谢亚历山德罗奥利韦里奥via</em><a class="ae jo" href="https://www.pexels.com/photo/silver-and-green-circuit-board-1472443/" rel="noopener ugc nofollow" target="_blank"><em class="lg">Pexels</em></a><em class="lg">。</em></p></div></div>    
</body>
</html>