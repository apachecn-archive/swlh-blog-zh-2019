<html>
<head>
<title>Let’s take a look at: Selenium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们来看看:硒</h1>
<blockquote>原文：<a href="https://medium.com/swlh/lets-take-a-look-at-selenium-d8640539ee23?source=collection_archive---------4-----------------------#2019-06-20">https://medium.com/swlh/lets-take-a-look-at-selenium-d8640539ee23?source=collection_archive---------4-----------------------#2019-06-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f6b0" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">综合指南</h2><div class=""/><div class=""><h2 id="4e97" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">什么是硒，你如何使用它？</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/daaf1457b571d4f92f0ea524e92432fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i384H_6SMsFYMMH4aPrZfw.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Photo by <a class="ae jw" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Franck V.</a> on <a class="ae jw" href="https://unsplash.com/search/photos/automation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="cb6f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">硒是什么？</h1><p id="3412" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">大多数听说过硒的人说起硒会想到什么？这是我一次又一次听到那些不太理解它的人说的话。</p><blockquote class="ll"><p id="6da9" class="lm ln hi hs lo lp lq lr ls lt lu lk dx translated">运行自动化测试的那个东西。</p></blockquote><p id="c20c" class="pw-post-body-paragraph kp kq hi kr b ks lv is ku kv lw iv kx ky lx la lb lc ly le lf lg lz li lj lk hb bi translated">虽然这是正确的，但硒的含量比这多一点。有许多不同的部分、层和工具组成了硒。</p><p id="752f" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这是我第一次研究编写自动化测试时希望拥有的文章。</p><h2 id="c4bd" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">目录</h2><p id="8cd9" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated"><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#b939">Selenium IDE<br/></a><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#3912">Selenium RC</a><br/><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#d3bb">Selenium web driver</a><br/>—<a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#cb4d">browser driver</a><br/><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#c707">Selenium Server</a><br/><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#619d">Selenium Grid</a><br/><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#4117">Frameworks</a><br/><a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#2198">入门</a> <br/> — <a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#ff32">玩浏览器驱动</a> <br/> — <a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#9050">用Chromedriver设置Selenium Server</a></p><h1 id="b989" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">硒IDE</h1><p id="9006" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Selenium IDE实际上是一个浏览器插件。</p><p id="ad3a" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">当你打开这个插件时，你会看到一个类似这样的屏幕:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ms"><img src="../Images/1e342caf47bf9b00d7500038e84ae333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tcFkptqhZ5AKPJeFijMS-Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Image of Selenium IDE initial start</figcaption></figure><p id="62d1" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">从这里您可以创建新的测试。当你创建一个新的测试时，它会在网络浏览器中监控你的行为。</p><p id="60ae" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">然后，它将保存这些操作以再次运行测试。虽然IDE可以用于许多不同的功能，但大规模自动化套件不是这样创建的。它不支持编程语言所具有的条件或其他特性。</p><p id="ea48" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">有一些非常棒的特性，所以如果你知道你的应用程序不是动态的，而是静态的，我会推荐它。</p><p id="c862" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我不使用IDE，但是如果你使用它并且在复杂的应用程序中使用过，请在评论中告诉我！我很想听听他们的故事。</p><h1 id="3912" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">硒RC</h1><p id="42c1" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Selenium Remote Control (RC)，也称为Selenium 1.0，将JavaScript注入浏览器。</p><p id="b143" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">因为Selenium WebDriver已经取代了它，所以我们不会过多讨论这个问题。</p><h1 id="4dcc" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">Selenium WebDriver</h1><p id="174d" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">Selenium WebDriver是Selenium RC的继任者。</p><p id="355e" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">Selenium WebDriver是一个API，有许多语言可以使用它。这种对每种语言的集成支持只是一种可以与浏览器驱动程序通信的依赖关系。</p><p id="c1ab" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">简单地说，Selenium WebDriver向浏览器驱动程序发送HTTP请求(RESTful API)并处理响应。</p><h2 id="cb4d" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated"><strong class="ak">浏览器驱动程序</strong></h2><p id="7278" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">每种浏览器的工作和行为都不同。我们不能指望Selenium跟上每个浏览器的工作方式。所以我们需要某种标准的功能来控制浏览器。</p><p id="4f43" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">因此，每个浏览器都必须维护自己的<em class="mt">网络驱动标准</em>的实现。</p><p id="8f75" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这些驱动程序是控制浏览器的网络服务器，是根据W3C标准中指定的<a class="ae jw" href="https://w3c.github.io/webdriver/" rel="noopener ugc nofollow" target="_blank">网络驱动程序规范</a>创建的。</p><p id="208a" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><a class="ae jw" rel="noopener" href="/@stephenboyd09/w3c-whatwg-standards-437b375cb793"> <strong class="kr mu"> <em class="mt">不要脸的塞给理解W3C </em> </strong> </a></p><h2 id="1336" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated"><strong class="ak">那么Selenium WebDriver和浏览器驱动有什么区别呢？</strong></h2><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mv"><img src="../Images/73579ec9eef208fda4dde3b7833d1859.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_B1N6rsQTzi8tugMRovAQ.png"/></div></div></figure><p id="f7dd" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">这里是很多困惑的来源</strong>。WebDriver标准与Selenium WebDriver。两个不同的东西，名字非常相似。</p><p id="4df5" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">Selenium WebDriver是由Selenium团队创建的API，用于与任何使用WebDriver标准创建的浏览器驱动程序进行交互。</p><p id="3f47" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">WebDriver标准是用于创建浏览器驱动程序的规范。浏览器驱动程序是与浏览器通信的WebDriver标准的实际实现。</p><blockquote class="ll"><p id="afb6" class="lm ln hi hs lo lp lq lr ls lt lu lk dx translated">Selenium WebDriver是与WebDriver标准的实现对话的API依赖项。</p></blockquote><p id="284b" class="pw-post-body-paragraph kp kq hi kr b ks lv is ku kv lw iv kx ky lx la lb lc ly le lf lg lz li lj lk hb bi translated">我将使用BrowserDriver这个术语来指代它的所有实现，包括ChromeDriver、GeckoDriver等。Selenium WebDriver将是API。T19】</p><p id="0b1d" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">在您的代码中，您将导入Selenium WebDriver依赖项。光是这一点还不足以开始使用你想要的浏览器。</p><p id="a0fa" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><em class="mt">补充说明:您并不总是需要导入Selenium WebDriver API。只要你有可以向BrowserDriver发出HTTP请求的东西，并且遵循W3C标准。就像一个</em> <a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#4117"> <em class="mt">框架</em> </a> <em class="mt">。</em></p><p id="62ff" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">您还需要为您希望使用的浏览器下载BrowserDriver可执行文件。BrowserDriver是一个web服务器，它运行并能与您的浏览器对话。</p><p id="c937" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">浏览器驱动程序可以:</p><ul class=""><li id="5677" class="mw mx hi kr b ks ma kv mb ky my lc mz lg na lk nb nc nd ne bi translated">启动浏览器</li><li id="bd47" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk nb nc nd ne bi translated">在浏览器上运行命令(例如点击或键入)</li><li id="aa9d" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk nb nc nd ne bi translated">截图</li><li id="89e8" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk nb nc nd ne bi translated">上传文件</li><li id="12d8" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk nb nc nd ne bi translated">多得多…</li></ul><p id="9300" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">browser drivers:</strong><br/>Chrome:<a class="ae jw" href="http://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">Chrome driver</a><br/>Firefox:<a class="ae jw" href="https://github.com/mozilla/geckodriver/releases/tag/v0.24.0" rel="noopener ugc nofollow" target="_blank">GeckoDriver</a><br/>IE:<a class="ae jw" href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/" rel="noopener ugc nofollow" target="_blank">EdgeDriver</a><br/><em class="mt">还有更多可用的驱动，只需快速谷歌搜走。</em></p><p id="1efc" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">它是这样工作的</strong>:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nk"><img src="../Images/cb352963a9ffeca620ab2fe47cdf6a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9IM6ArChQEXgdAzft0oIxw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Diagram showing Client connecting with the BrowserDriver that connects to the Browser</figcaption></figure><p id="c672" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">因为我主要使用JavaScript，这里有一个<code class="du nl nm nn no b">selenium-webdriver</code>包的例子:</p><p id="cddb" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><code class="du nl nm nn no b">await driver.findElement(By.name('q')).click()</code></p><ol class=""><li id="444b" class="mw mx hi kr b ks ma kv mb ky my lc mz lg na lk np nc nd ne bi translated">这段代码向BrowserDriver发送一个请求，以找到名为<code class="du nl nm nn no b">q</code>的元素</li><li id="63b2" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">BrowserDriver然后向浏览器发送一个请求，请求一个名为<code class="du nl nm nn no b">q</code>的元素</li><li id="ecc0" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">浏览器将找到的元素返回给BrowserDriver</li><li id="bf45" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">BrowserDriver然后将找到的元素返回给代码</li><li id="228c" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">然后，代码向BrowserDriver发送一个请求，请求它单击接收到的元素</li><li id="6104" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">BrowserDriver将该元素和所请求的单击动作发送给浏览器</li><li id="ffcc" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">浏览器根据浏览器驱动程序的单击结果返回状态代码和消息</li><li id="13b0" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">BrowserDriver将状态代码和消息返回给代码进行处理</li></ol><p id="14b0" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">一旦你下载了浏览器驱动程序，你就可以运行它了。您应该会得到类似如下的输出:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nq"><img src="../Images/c1d5b6723737f0d72c2d61d0bf270c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ca5hxy3kNRYVbJQZWtJCMQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">The output of starting the ChromeDriver</figcaption></figure><p id="7fbf" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">正如我们所看到的，这个BrowserDriver已经启动了一个运行在端口9515上的web服务器。</p><p id="d57b" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">为了看看对BrowserDriver的请求是什么样的，这里有一个列表(这个web driver W3C live文档已经取代了JSON Wire协议):<a class="ae jw" href="https://w3c.github.io/webdriver/#endpoints" rel="noopener ugc nofollow" target="_blank">https://w3c.github.io/webdriver/#endpoints</a></p><p id="2556" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如果你已经运行了浏览器驱动程序，你可以向它发出你自己的HTTP请求！在指南的<a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#2198">入门</a>部分有一个指南！</p><h1 id="c707" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">Selenium服务器</h1><p id="dabc" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">首先，我希望您考虑一下仅使用Selenium WebDriver和BrowserDrivers一次运行多个测试。那会是什么样子？</p><p id="3759" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">大概是这样的:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nr"><img src="../Images/23961b403ba27052b4ba72554ec06e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTIgdxYDabYy0Y-_AvFKWw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Diagram showing the connection of many BrowserDrivers to the Client</figcaption></figure><p id="60e0" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这看起来有点混乱，它留给你的客户来管理所有这些不同的驱动程序会话，并确保它们都相应地行动。这也意味着所有这些浏览器和浏览器驱动程序都将在客户机上运行！</p><p id="c185" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我见过的一个主要问题是，有时浏览器驱动程序不关闭，仍然在你的机器上运行。</p><p id="65f8" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">Selenium服务器是一个独立的web服务器，可以在任何地方运行。您可以将这项工作卸载给服务器，而不是由客户端直接控制浏览器驱动程序。</p><p id="543e" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">因此，当您编写测试时，您告诉客户机将请求发送到Selenium服务器。每种语言/框架都有自己连接客户端和服务器的方式。</p><p id="e1ff" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">当创建与Selenium服务器的会话时，您发送它<code class="du nl nm nn no b">desired capabilities</code>。这些功能告诉Selenium服务器它需要知道的一切，比如你想使用哪个浏览器，哪个操作系统以及<a class="ae jw" href="https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities" rel="noopener ugc nofollow" target="_blank">更多的</a>。</p><p id="6060" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">然后Selenium服务器处理您的所有请求，并处理每个BrowserDriver。这也包括在出错时自动关闭浏览器。</p><p id="8999" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">为什么这可能有用？这样做的一个重要原因是在远程机器或虚拟机上运行测试。这允许您防止您的测试使您的客户端机器过载。</p><p id="fc37" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这是安装了Selenium服务器后的情况:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ns"><img src="../Images/d683119b5caa9b8309f429980582507d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fmjcgg72CFV4liqSWhH8Cw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Diagram of the Client connecting to a remote Selenium Server</figcaption></figure><h1 id="619d" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">硒栅</h1><p id="5490" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">使用Selenium服务器看起来比只运行BrowserDriver实例的客户机好得多。至少专用服务器接管了工作负载。但是，如果我们想要同时运行大量的测试，这会使服务器超负荷工作，或者我们想要我们的测试在不同的操作系统上运行，该怎么办呢？</p><p id="6c0e" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">Selenium Grid的出现使它变得更复杂，但也更好。</p><p id="74fb" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">Selenium网格创建了许多不同的Selenium服务器(称为节点)的连接，并将它们集中到一个地方(称为hub)。</p><p id="978f" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">网格通过建立两个东西来工作:中心和节点。</p><h2 id="d95d" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">中心</h2><p id="5208" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">集线器是一个网络服务器，你可以在那里发送所有的请求。</p><p id="adea" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">它可以运行在本地机器、远程服务器或虚拟机上。它还可以在各种支持Java的操作系统上运行。</p><p id="33e2" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">集线器接收这些请求，并将它们转发到正确的节点。它就像一个邮件收发室。它计算出每个请求需要去哪里，并将它们发送到那里。</p><p id="7738" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">您可以在创建测试时指定要在代码中使用的操作系统和浏览器。集线器将寻找任何运行在具有浏览器BrowserDriver的操作系统上的附加节点。</p><h2 id="a51e" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">结节</h2><p id="f5c4" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">节点类似于Selenium服务器，因为它具有相似的功能。它管理浏览器驱动程序并将请求传递给它们。</p><p id="cf69" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">像hub一样，可以在本地机器、远程服务器或VM上创建节点。它还可以在各种支持Java的操作系统上运行。因此，您可以在MacOS上有一个节点，在Windows服务器上有另一个节点，等等…</p><p id="8096" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">您可以将许多不同的节点连接到一个集线器，这些节点可以位于许多单独的机器上。这样你就可以在多台机器之间分配工作。</p><p id="f74e" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">您还可以设置一个节点来同时处理许多BrowserDrivers。这样它就可以在Firefox、Edge、Chrome、IE等平台上运行测试…</p><p id="ceda" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">它是这样工作的:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nt"><img src="../Images/adb0d1076b667549d4fa7e7b426c9142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h2QPrB7mGmRvNvEK9_84Nw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Diagram of the Client connecting to the Selenium Hub, which is connected to multiple nodes</figcaption></figure><p id="640f" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如您所见，我们为许多节点设置了不同数量的可用驱动程序。</p><p id="7b34" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这个过程将工作从客户端机器卸载到不同的机器上来处理工作。如果我有这样的设置，我可以在许多不同的机器上一次执行多个测试，甚至是非常糟糕的笔记本电脑。</p></div><div class="ab cl nu nv gp nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="hb hc hd he hf"><h1 id="4117" class="jx jy hi bd jz ka ob kc kd ke oc kg kh ix od iy kj ja oe jb kl jd of je kn ko bi translated">结构</h1><p id="7fab" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">顺便提一下，有许多不同的框架是基于Seleniums WebDriver规范或<code class="du nl nm nn no b">selenium-webdriver</code>模块构建的。因为我主要使用Node.js，所以我提到的所有框架也都是Node.js框架。</p><p id="b6f0" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">框架倾向于为你做所有繁重的工作。他们将启动您的本地Selenium服务器，或者您与浏览器驱动程序的直接连接，他们将创建自己的命令供您使用，同时也为您完成所有繁重的工作。我建议使用这些伟大的框架中的一个，而不是从头开始构建它！</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es og"><img src="../Images/1c23a8270a6a03c1ca75fd0f9a677167.png" data-original-src="https://miro.medium.com/v2/resize:fit:334/format:webp/1*cXwoPbu8pZDEQGuqoq7Wdw.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">WebdriverIO Logo</figcaption></figure><p id="7774" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">web drivero:</strong>我是web drivero的忠实拥护者。他们不使用已经创建的工具，如<code class="du nl nm nn no b">selenium-webdriver</code>模块来与WebDriver通信。相反，他们根据<a class="ae jw" href="https://w3c.github.io/webdriver/" rel="noopener ugc nofollow" target="_blank"> WebDriver规范</a>创建了自己的实现。很棒的团队，很棒的工具！</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oh"><img src="../Images/d91bb067bce5f71150e02302c72e5349.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*IcXWZcMW13DAXekEJOZ-nQ.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Protractor Logo</figcaption></figure><p id="ff11" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">量角器</strong>:量角器安装在<code class="du nl nm nn no b">selenium-webdriver</code>模块的顶部。它是专为角度应用而设计的。然而，任何其他框架当然也适用于角度应用。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oi"><img src="../Images/32a51c205be877f12f1384d63616780a.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*h8UT0VXyGtLbQwxaupaPKA.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Nightwatch.js Logo</figcaption></figure><p id="8255" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu"> Nightwatch.js </strong>:关于Nightwatch我不能说太多，考虑到我没用过。但是像WebdriverIO一样，他们也创建了自己的关于<a class="ae jw" href="https://w3c.github.io/webdriver/" rel="noopener ugc nofollow" target="_blank"> WebDriver规范</a>的实现。我听说过关于它的伟大的事情！</p><p id="9441" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">虽然我是WebdriverIO的拥护者，但还是要找到哪一个符合你的需求，想要更好的。你会很高兴你做到了！</p><p id="9f67" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这绝不是一个全面的列表，如果你想使用一个框架，做你的研究！</p></div><div class="ab cl nu nv gp nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="hb hc hd he hf"><h1 id="2198" class="jx jy hi bd jz ka ob kc kd ke oc kg kh ix od iy kj ja oe jb kl jd of je kn ko bi translated">我如何开始？</h1><h2 id="ff32" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">BrowserDriver API</h2><p id="59c9" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">在我们开始建立一个实际的项目之前。我想了解一下如何向BrowserDriver发出HTTP请求。</p><p id="5041" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如果您不关心这一部分，那么您可以跳到<a class="ae jw" rel="noopener" href="/@stephenboyd09/d8640539ee23#70f9">创建项目</a>。这是为那些想了解所有代码如何在更深层次上与BrowserDriver通信的人准备的。</p><p id="d927" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我将展示一个ChromeDriver的例子，以及它如何接受HTTP请求和控制浏览器。</p><h2 id="cb36" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">下载浏览器驱动程序</h2><p id="75a2" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">找到你正在使用的Chrome版本，找到正确的Chrome驱动版本。【http://chromedriver.chromium.org/downloads】T5<br/>T6】</p><h2 id="f743" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">启动ChromeDriver</h2><p id="5338" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">这一步非常简单。只需将<code class="du nl nm nn no b">.exe</code>文件提取出来。运行它！您应该会看到类似这样的内容。注意它运行的端口号。对我来说是<code class="du nl nm nn no b">9515</code>。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es nq"><img src="../Images/c1d5b6723737f0d72c2d61d0bf270c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ca5hxy3kNRYVbJQZWtJCMQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">The output of starting the ChromeDriver</figcaption></figure><h2 id="7c66" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">提出你的要求</h2><p id="bf6e" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">先说第一件事，开<a class="ae jw" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>之类的。</p><p id="b9dd" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">要开始控制你的浏览器，你首先需要一个会话。要创建会话，向新运行的服务器发出POST请求，如下所示:</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="5d3d" class="mf jy hi no b fi on oo l op oq"><strong class="no mu">POST request</strong></span><span id="ffc8" class="mf jy hi no b fi or oo l op oq">http://localhost:9515/session</span><span id="c5b4" class="mf jy hi no b fi or oo l op oq"><br/><strong class="no mu">Body of your POST request</strong></span><span id="04db" class="mf jy hi no b fi or oo l op oq">{<br/>  “capabilities”: {<br/>    “browserName”: “chrome”<br/>  }<br/>}</span></pre><p id="3bf7" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">一旦你发出POST请求，你应该看到Chrome打开了。在响应正文中，您应该看到<code class="du nl nm nn no b">sessionId</code>，<strong class="kr mu">紧紧抓住它，因为您将需要它。</strong>我的是:3b 784 ca 884984 ecce 8868025285021 c 0</p><p id="7a3b" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">现在我们在控制Chrome </strong>。让我们导航到谷歌！</p><p id="e55f" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们将发出一个POST请求，在URL中包含我们的会话ID，如下所示:</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="5cc9" class="mf jy hi no b fi on oo l op oq"><strong class="no mu">POST request</strong></span><span id="2c48" class="mf jy hi no b fi or oo l op oq">http://localhost:9515/session/3b784ca884984ecce8868025285021c0/url</span><span id="2f34" class="mf jy hi no b fi or oo l op oq"><strong class="no mu">Body of your POST request</strong></span><span id="a81b" class="mf jy hi no b fi or oo l op oq">{<br/>  "url": "https://www.google.com"<br/>}</span></pre><p id="c464" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">你应该看到Chrome导航到谷歌。</p><p id="bf11" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">接下来，让我们找到页面上的一个元素。让我们得到搜索栏！</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="6bd1" class="mf jy hi no b fi on oo l op oq"><strong class="no mu">POST request</strong></span><span id="6f84" class="mf jy hi no b fi or oo l op oq">http://localhost:9515/session/3b784ca884984ecce8868025285021c0/element</span><span id="3847" class="mf jy hi no b fi or oo l op oq"><strong class="no mu">Body of your POST request</strong></span><span id="8c3c" class="mf jy hi no b fi or oo l op oq">{<br/>  "using": "xpath", <br/>  "value": "//input[@name='q']"<br/>}</span></pre><p id="47f1" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们应该看到这样的回报:</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="844e" class="mf jy hi no b fi on oo l op oq"><strong class="no mu">Return Value<br/></strong>{<br/>  "value": {<br/>    "element-6066-11e4-a52e-4f735466cecf": "b8363554-d3a1-4342-b1f1-92ae2d492c14"<br/>  }<br/>}</span></pre><p id="6343" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">让我们跟踪元素值</strong>，这样我们就可以在搜索栏中输入内容。</p><p id="80f7" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">现在我们想在该元素中键入:</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="5dc7" class="mf jy hi no b fi on oo l op oq"><strong class="no mu">POST request</strong></span><span id="0d75" class="mf jy hi no b fi or oo l op oq">http://localhost:9515/session/3b784ca884984ecce8868025285021c0/element/b8363554-d3a1-4342-b1f1-92ae2d492c14/value</span><span id="0c5d" class="mf jy hi no b fi or oo l op oq"><strong class="no mu">Body of your POST request</strong></span><span id="04dc" class="mf jy hi no b fi or oo l op oq">{<br/>  "text": "selenium automation"<br/>}</span></pre><p id="8428" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们应该看到<code class="du nl nm nn no b">selenium automation</code>进入了搜索栏！</p><p id="eb00" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这就是现在关于WebDriver的内容，但是如果你想看到更多的API调用，可以查看这里的文档:<a class="ae jw" href="https://w3c.github.io/webdriver/#endpoints" rel="noopener ugc nofollow" target="_blank">https://w3c.github.io/webdriver/#endpoints</a></p><h1 id="70f9" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">创建项目</h1><p id="f99b" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">我知道我说过我推荐使用自动化框架，而不是自己构建，但是我相信理解它是如何工作的是很重要的。这就是我们要做的。</p><blockquote class="ll"><p id="eb9a" class="lm ln hi hs lo lp lq lr ls lt lu lk dx translated"><strong class="ak"> <em class="os">想清楚如何开始的第一步是想清楚自己的需求是什么。</em> </strong></p></blockquote><p id="50fe" class="pw-post-body-paragraph kp kq hi kr b ks lv is ku kv lw iv kx ky lx la lb lc ly le lf lg lz li lj lk hb bi translated">为了简单起见，我们将一次运行一个测试，所以我们不太需要Selenium网格。但是我们将使用Selenium服务器。</p><p id="58d4" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们将在本地设置这个Selenium服务器，但是在远程机器上设置它时，同样的原则也适用。</p><p id="bd52" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">正如我之前提到的，我通常使用JavaScript，所以我们将使用Node.js。所以如果你想继续，你需要<a class="ae jw" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">安装Node </a>。在撰写本文时，我使用的是10.16版本。</p><p id="4ece" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">要使用Selenium服务器，您还需要Java。 </p><p id="5f37" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">为了让每个人(包括使用其他语言的人)都能跟上Selenium服务器的安装，我不会使用捷径(比如这个包:<code class="du nl nm nn no b"><a class="ae jw" href="https://www.npmjs.com/package/selenium-standalone" rel="noopener ugc nofollow" target="_blank">selenium standalone</a></code>)。</p><h1 id="9050" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">使用ChromeDriver启动Selenium服务器</h1><h2 id="5028" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">下载Selenium独立服务器:</h2><p id="4619" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">下载链接:<a class="ae jw" href="https://www.seleniumhq.org/download/" rel="noopener ugc nofollow" target="_blank">https://www.seleniumhq.org/download/</a></p><h2 id="a9da" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">下载chrome驱动</h2><p id="ddd4" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">下载链接:<a class="ae jw" href="http://chromedriver.chromium.org/" rel="noopener ugc nofollow" target="_blank">http://chromedriver.chromium.org/</a></p><h2 id="3950" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">创建您的项目文件夹</h2><ol class=""><li id="f10d" class="mw mx hi kr b ks kt kv kw ky ot lc ou lg ov lk np nc nd ne bi translated">创建一个您希望项目所在的文件夹</li><li id="38b6" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">从下载的zip文件中提取<code class="du nl nm nn no b">chromedriver.exe</code>文件</li><li id="8d68" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">将<code class="du nl nm nn no b">selenium-server-standalone-versionNumber.jar</code>文件和<code class="du nl nm nn no b">chromedriver.exe</code>文件放到你的项目文件夹中</li></ol><h2 id="0d50" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">启动Selenium服务器</h2><ol class=""><li id="633d" class="mw mx hi kr b ks kt kv kw ky ot lc ou lg ov lk np nc nd ne bi translated">打开您最喜欢的终端并导航到您的项目文件夹</li><li id="bbaa" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">运行以下:<code class="du nl nm nn no b">java -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-*versionNumber*.jar</code>。将*versionNumber*替换为您的版本号。</li><li id="9ac6" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">您应该会看到类似于<code class="du nl nm nn no b">Selenium Server is up and running on port 4444</code>的内容</li></ol><p id="09e0" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">步骤2中的命令运行<code class="du nl nm nn no b">selenium-server-standalone</code>并选择使用ChromeDriver。</p><p id="e4ab" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如果您导航到<a class="ae jw" href="http://localhost:4444/wd/hub/static/resource/hub.html" rel="noopener ugc nofollow" target="_blank">http://localhost:4444/wd/hub/static/resource/hub . html</a>，您应该会看到如下内容:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ow"><img src="../Images/c9e080a81fe2a1d20a5cc693ce372aee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jGr8n36TjcCyGY4kE2ymaA.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx">Fig 2.0 Screen capture of the Selenium Server web interface</figcaption></figure><h1 id="4207" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">创建Node.js项目</h1><h2 id="cf9a" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">创建您的初始项目</h2><ol class=""><li id="009d" class="mw mx hi kr b ks kt kv kw ky ot lc ou lg ov lk np nc nd ne bi translated">打开您最喜欢的IDE或文本编辑器</li><li id="04d0" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">在项目文件夹中创建一个带有<code class="du nl nm nn no b">npm init</code>的新项目</li><li id="97f9" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">填写<code class="du nl nm nn no b">npm init</code>问题</li><li id="80be" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">安装<code class="du nl nm nn no b"><a class="ae jw" href="https://www.npmjs.com/package/selenium-webdriver" rel="noopener ugc nofollow" target="_blank">selenium-webdriver</a></code>依赖于:<br/> <code class="du nl nm nn no b">npm i selenium-webdriver --save</code></li><li id="ce65" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">用<br/>和<code class="du nl nm nn no b">npm i mocha chai --save</code>安装<code class="du nl nm nn no b"><a class="ae jw" href="https://www.npmjs.com/package/mocha" rel="noopener ugc nofollow" target="_blank">mocha</a></code>和<code class="du nl nm nn no b"><a class="ae jw" href="https://www.npmjs.com/package/chai" rel="noopener ugc nofollow" target="_blank">chai</a></code></li></ol><h2 id="89bf" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">编写您的测试(解释如下)</h2><figure class="jh ji jj jk fd jl"><div class="bz dy l di"><div class="ox oy l"/></div><figcaption class="js jt et er es ju jv bd b be z dx">Gist from my GitHub account</figcaption></figure><h2 id="2ba5" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">代码解释</h2><p id="5246" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated"><code class="du nl nm nn no b"><strong class="kr mu">selenium-webdriver</strong></code> <strong class="kr mu">依赖:</strong></p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="3c16" class="mf jy hi no b fi on oo l op oq">const {until, By, Builder, Capabilities, Key} = require(‘selenium-webdriver’);</span></pre><p id="14be" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">至</strong>:与<code class="du nl nm nn no b">driver.wait</code>配合使用。它将一直等到满足一个条件<br/> <strong class="kr mu">:一种在页面上定位元素的机制<br/> <strong class="kr mu">生成器</strong>:用于创建一个新的WebDriver实例<br/> <strong class="kr mu">功能</strong>:包含WebDriver会话<br/> <strong class="kr mu">键</strong>的功能集:该对象包含非文本的键值，例如按下回车键</strong></p><p id="0760" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">这是Selenium WebDriver。</p><p id="2ab1" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><code class="du nl nm nn no b">selenium-webdriver</code>对象包含的内容的完整列表...<br/>看这里:<a class="ae jw" href="https://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/index.html" rel="noopener ugc nofollow" target="_blank">https://selenium HQ . github . io/selenium/docs/API/JavaScript/module/selenium-web driver/index . html</a></p><p id="fcf9" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><code class="du nl nm nn no b"><strong class="kr mu">chai</strong></code> <strong class="kr mu">依赖:</strong></p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="e390" class="mf jy hi no b fi on oo l op oq">const chai = require(‘chai’);<br/>const {expect} = chai;</span></pre><p id="8258" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">接下来，我们导入断言库Chai。如果你以前没用过柴，我推荐你去看看！然后我们使用柴库来创建对象。</p><p id="9a25" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">创建我们的驱动程序</strong></p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="c494" class="mf jy hi no b fi on oo l op oq">const driver = new Builder()<br/>  .withCapabilities(Capabilities.chrome())<br/>  .usingServer(‘http://localhost:4444/wd/hub')<br/>  .build();</span></pre><p id="a585" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">驱动程序是我们用来向BrowserDriver发出请求的API。我们正在用<code class="du nl nm nn no b">Builder</code>给自己创造一个车手。</p><p id="cca8" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们用<code class="du nl nm nn no b">Capabilities.chrome()</code>设置默认的Chrome功能</p><p id="a43a" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们将驱动程序设置为使用带有<code class="du nl nm nn no b">usingServer</code>的Selenium服务器，并给它一个运行Selenium服务器的位置。哪个对我们来说是<code class="du nl nm nn no b">http://localhost:4444/wd/hub</code></p><p id="6b07" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">然后我们建立我们的驱动程序！</p><p id="ddcb" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">创建我们的摩卡测试</strong></p><p id="aac4" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如果你不熟悉摩卡，那就去看看吧！有许多关于如何使用它的很好的指南。</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="1144" class="mf jy hi no b fi on oo l op oq">describe(‘Google Test’, function() {</span></pre><p id="1432" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们给我们的摩卡测试命名为<code class="du nl nm nn no b">Google Test</code>。</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="c370" class="mf jy hi no b fi on oo l op oq">this.timeout(0);</span></pre><p id="7530" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们通过将<code class="du nl nm nn no b">timeout</code>设置为<code class="du nl nm nn no b">0</code>来移除它。我们这样做是因为默认超时是2000毫秒。对于运行UI测试来说，这个时间通常太短了。你可以随意设置超时时间，但现在，我只是禁用它。</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="5364" class="mf jy hi no b fi on oo l op oq">beforeEach(async function() { <br/>  await driver.get(‘https://www.google.com'); <br/>  await driver.wait(until.elementLocated(<br/>    By.xpath(`//input[@name=’q’]`)), 20000); <br/>});</span></pre><p id="ca8a" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">我们使用<code class="du nl nm nn no b">beforeEach</code>函数让驱动程序导航到Google的主页，并等待搜索栏出现在页面上。</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="fdaf" class="mf jy hi no b fi on oo l op oq">it(‘Use searchbar’, async function() { <br/>  await driver.findElement(By.xpath(`//input[@name=’q’]`)).click();</span><span id="2f7e" class="mf jy hi no b fi or oo l op oq">  await driver.findElement(<br/>    By.xpath(`//input[@name=’q’]`)<br/>  ).sendKeys(‘selenium automation’, Key.RETURN);</span><span id="db43" class="mf jy hi no b fi or oo l op oq">  await driver.wait(<br/>    until.elementIsVisible(driver.findElement(<br/>      By.xpath(`//div[@class=’g’]`))<br/>  ), 5000); </span><span id="0504" class="mf jy hi no b fi or oo l op oq">  const firstResult = await driver.findElement(<br/>    By.xpath(`//div[@class=’g’]//h3`)<br/>  ).getText();</span><span id="7d81" class="mf jy hi no b fi or oo l op oq">  expect(firstResult.toLowerCase()).to.contain(‘selenium’); <br/>});</span></pre><p id="3b2e" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">然后我们开始第一次测试。这个测试点击搜索栏，输入<code class="du nl nm nn no b">selenium automation</code>并按下<code class="du nl nm nn no b">Enter</code>。然后等待第一个结果通过XPath <code class="du nl nm nn no b">//div[@class='g']</code>显示出来。它将等待5秒钟的结果。<br/>测试将获取第一个结果的标题，并确保它包含文本<code class="du nl nm nn no b">selenium</code>。</p><pre class="jh ji jj jk fd oj no ok ol aw om bi"><span id="63f3" class="mf jy hi no b fi on oo l op oq">after(async function() { <br/>  await driver.quit(); <br/>});</span></pre><p id="834d" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">在我们所有的测试都运行之后，<code class="du nl nm nn no b">after</code>方法被调用。这叫<code class="du nl nm nn no b">driver.quit()</code>。我们必须调用<code class="du nl nm nn no b">driver.quit()</code>，否则驱动程序和浏览器会话也将保持打开。</p><h2 id="55f8" class="mf jy hi bd jz mg mh mi kd mj mk ml kh ky mm mn kj lc mo mp kl lg mq mr kn ho bi translated">运行测试</h2><p id="386e" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">在我们的<code class="du nl nm nn no b">package.json</code>文件中，我们想要添加一个名为<code class="du nl nm nn no b">test</code>的脚本。<br/>我们希望这个测试脚本运行<code class="du nl nm nn no b">mocha test.js</code> : <br/> <code class="du nl nm nn no b">"test": mocha test.js</code></p><p id="266c" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">在你的终端运行<code class="du nl nm nn no b">test</code>脚本:<br/> <code class="du nl nm nn no b">npm run test</code></p><p id="2605" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">您应该看到:</p><ol class=""><li id="6477" class="mw mx hi kr b ks ma kv mb ky my lc mz lg na lk np nc nd ne bi translated">你的浏览器打开了</li><li id="b896" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">导航至谷歌</li><li id="edd4" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">在搜索栏中输入<code class="du nl nm nn no b">selenium automation</code></li><li id="793e" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">谷歌搜索已执行</li><li id="092e" class="mw mx hi kr b ks nf kv ng ky nh lc ni lg nj lk np nc nd ne bi translated">谷歌搜索结果</li></ol><p id="ed97" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">浏览器关闭后，您应该会在控制台中看到以下内容:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es oz"><img src="../Images/a136e8fb637df4f4d8fbed071b973370.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*WxGCBCVSziPfrv1PQZ6TTQ.png"/></div></figure><p id="e342" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated"><strong class="kr mu">恭喜恭喜！现在，您已经设置了一个Selenium服务器，并创建了使用该服务器的自动化UI测试！</strong></p><h1 id="d1b8" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ix ki iy kj ja kk jb kl jd km je kn ko bi translated">最后的想法</h1><p id="8e15" class="pw-post-body-paragraph kp kq hi kr b ks kt is ku kv kw iv kx ky kz la lb lc ld le lf lg lh li lj lk hb bi translated">所以我们看了很多信息。我们讨论了Selenium的不同组件，包括Selenium IDE、Selenium RC (kinda)、Selenium WebDriver、WebDriver实现(BrowserDriver)、Selenium服务器、Selenium网格，以及如何创建针对Selenium服务器运行的自动化测试！</p><p id="12be" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">如果我错过了什么，请在下面的评论中告诉我，我很乐意能够澄清或调整一些事情！</p><p id="eadd" class="pw-post-body-paragraph kp kq hi kr b ks ma is ku kv mb iv kx ky mc la lb lc md le lf lg me li lj lk hb bi translated">关于WebDriver标准的所有细节，请阅读这里的文档！<a class="ae jw" href="https://w3c.github.io/webdriver/" rel="noopener ugc nofollow" target="_blank">https://w3c.github.io/webdriver/</a></p></div></div>    
</body>
</html>