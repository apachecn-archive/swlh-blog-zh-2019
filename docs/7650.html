<html>
<head>
<title>Creating JSPen: A codepen-like editor that stores pages in URLs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建JSPen:一个类似codepen的编辑器，将页面存储在URL中</h1>
<blockquote>原文：<a href="https://medium.com/swlh/creating-jspen-a-codepen-like-editor-that-stores-pages-in-urls-b163934f06c8?source=collection_archive---------18-----------------------#2019-07-05">https://medium.com/swlh/creating-jspen-a-codepen-like-editor-that-stores-pages-in-urls-b163934f06c8?source=collection_archive---------18-----------------------#2019-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6916" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">没有服务器，没有后端，没有问题！</h2></div><p id="8356" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi jt translated">上周日，黑客新闻发布了一个名为<a class="ae kc" href="https://github.com/jstrieb/urlpages" rel="noopener ugc nofollow" target="_blank">展示HN:网页完全存储在网址</a>的整洁项目。这让我创建了<a class="ae kc" href="https://jspen.co/" rel="noopener ugc nofollow" target="_blank">https://jspen.co/</a>:一个类似codepen的编辑器，用于创建完全存在于URL中的无服务器网页。</p><blockquote class="kd ke kf"><p id="968a" class="ix iy kg iz b ja jb ij jc jd je im jf kh jh ji jj ki jl jm jn kj jp jq jr js hb bi translated">我最初认为这是一个简单、静态的CodePen克隆，但我觉得将页面“发布”为URL是一个有趣的想法。所以我决定把它的这一方面放在最前面和最中心，尽管这并不是项目开始时的重点。</p></blockquote><p id="0976" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我很快分叉了这个项目，并提交了一些微小的拉请求。不知道为什么，但我真的很喜欢这个概念，在接下来的两天里，我几乎把它变成了Codepen的表层克隆(再进一步就太雄心勃勃了)。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/2a788298ec11e724697675729f2dd369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qoa4V_aTZCcL6DbT9sKanA.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">One quick pen I hammered out in JSPen.co</figcaption></figure><h1 id="b5cb" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">改进/新功能</h1><p id="a37a" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">我很快添加了一些非常基本的改进:</p><ul class=""><li id="d1de" class="lx ly hi iz b ja jb jd je jg lz jk ma jo mb js mc md me mf bi translated">Unicode支持(表情符号、亚洲语言等。)</li><li id="1c41" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">能够包含页面标题(HTML标题标签)以及页面作者(元作者标签)</li><li id="9788" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">将页面存储在localStorage中(这样您就可以将草稿保存到自己的设备上，就像在Codepen帐户中一样)</li><li id="629c" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">分叉和编辑现有页面的能力</li><li id="6479" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">在Twitter上分享页面</li><li id="a34b" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">通过短网址分享(我建立了一个小网址短网址)</li><li id="f540" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">通过二维码分享</li><li id="c46c" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">删除笔的能力</li><li id="103e" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">一个不错的支持Emmet的Ace编辑器</li><li id="f3a7" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated"><iframe>沙盒</iframe></li></ul><h1 id="ef9b" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">品牌和风格</h1><p id="06c5" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">虽然没有直接从Codepen中窃取任何东西，但我会说，我可能会从美学中得到一些启发，即使只是在基本的层面上。没有代码被直接复制或类似的事情(他们的设计实际上比这发展得更远)，但是我可能在Codepen上花了几千个小时，并且不超过几分钟就可以清理页面，看起来&amp;感觉起来就像Codepen几年前的样子。</p><h1 id="c1dc" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">挑选一个名字</h1><p id="e953" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">我通过<a class="ae kc" href="https://tld-list.com/" rel="noopener ugc nofollow" target="_blank">https://tld-list.com/</a>搜索各种扩展名下的域名。</p><p id="425a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，我想出了几个主意，比如:</p><ul class=""><li id="a717" class="lx ly hi iz b ja jb jd je jg lz jk ma jo mb js mc md me mf bi translated">nocodep.in</li><li id="39de" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">htmlp.in</li><li id="a220" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">urlpag.es</li><li id="ae0c" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">佩尔帕格斯</li><li id="de70" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">permpag.es</li><li id="9a48" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">ipag.es</li><li id="5bcf" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">hpag.es</li><li id="6bb9" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">mpag.es</li><li id="7942" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">opag.es</li><li id="65c7" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">rpag.es</li><li id="4a02" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">upag.es</li><li id="3972" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js mc md me mf bi translated">wpag.es</li></ul><p id="2777" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在最终选定jsPen.co之前。正在打折。co域名，这可能是推动我在这个方向上比什么都重要！</p><h1 id="bafd" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">标志</h1><p id="a11c" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">我没有在logo上花太多时间。我最初认为我会跳过创建一个，直到我意识到这意味着没有网页会有一个图标。所以，我用一个自由授权的笔SVG和字母<code class="du mm mn mo mp b">JS</code>创建了一个最小的logo。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div class="er es mq"><img src="../Images/0e83ff4a455b6cdda95c74c94c92f0a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:160/0*2kYnOapqksaGRAKT"/></div></figure><h1 id="d777" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">测试这一切</h1><p id="6014" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">接下来，我从Codepen拉了一堆我的笔，还有主页上的一些(当然是有作者信用的！).这让我完全填充了我的<code class="du mm mn mo mp b">My Pens</code>页面，我确信你能够在<code class="du mm mn mo mp b">localStorage</code>中存储大量的笔，并确保没有任何大的错误(我确实找到了一些)。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/007d743cbb814d184a2d066334d02b38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ho6QIsqlS5jgzF1Dz1vffw.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">My First Few Pens</figcaption></figure><h1 id="0b7f" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">在Twitter上分享钢笔</h1><p id="3669" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">我构建了一个小功能，允许用户在Twitter上共享笔，使用Twitter Intents API:【http://twitter.com/intent/tweet<a class="ae kc" href="http://twitter.com/intent/tweet" rel="noopener ugc nofollow" target="_blank">T3】</a></p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/0d9c743019e9d4a0a59e0da7d9022554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-R5eqBa7xd7ix_HyAdfpA.png"/></div></div></figure><h1 id="d001" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">创建一个没有后台的主页</h1><p id="42ee" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">现在是真正困难的部分:我想创建一个主页，没有服务器后端！</p><p id="35e9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">谢天谢地，我偶然发现了Twitter Fetcher库。这可以从一个账户拉推，不需要后端服务器。</p><div class="mr ms ez fb mt mu"><a href="https://github.com/jasonmayes/Twitter-Post-Fetcher" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab dw"><div class="mw ab mx cl cj my"><h2 class="hj b fi z dy mz ea eb na ed ef hh bi translated">Jason mayes/Twitter-Post-Fetcher</h2><div class="nb l"><h3 class="bd b fi z dy mz ea eb na ed ef dx translated">无需使用新的twitter 1.1 API即可获取您的Twitter帖子。纯JavaScript！作者杰森·梅斯…</h3></div><div class="nc l"><p class="bd b fp z dy mz ea eb na ed ef dx translated">github.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni ku mu"/></div></div></a></div><p id="1bc7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我很快注册了一个新的推特账户，<a class="ae kc" href="http://twitter.com/htmlpins" rel="noopener ugc nofollow" target="_blank"> @htmlpins </a>，人们可以在上面发布他们的创作。如果我从这个账户转发它，它会出现在主页上。</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es nj"><img src="../Images/c0a6c13035fc6c38a463159499d41e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjtCEV-rrJB87i18V8iWkA.png"/></div></div></figure><p id="0b91" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">概念的快速验证:</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/09b9e213c79cbbc6c8010f99b4cd5dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtYEUmx2bw0YzxvVtzDn2g.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">My first attempt at using the twitter-fetcher API</figcaption></figure><p id="c4d8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就产生了这个主页(只是我的笔页面的一个变种)</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/73ba651cc4d276a82cdedc70d996dcb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3uIl_FiXUgaBZ3an75vdHQ.png"/></div></div></figure><h1 id="cc17" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">共享网站</h1><p id="2510" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">接下来，我花了一点时间在网上分享这个网站。</p><ol class=""><li id="589c" class="lx ly hi iz b ja jb jd je jg lz jk ma jo mb js nk md me mf bi translated"><a class="ae kc" href="https://www.reddit.com/r/SideProject/comments/c8wd7x/jspen_free_permanent_web_pages_stored_in_the_url/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/side project/comments/c8wd7x/jspen _ free _ permanent _ web _ pages _ stored _ in _ the _ URL/</a></li><li id="c1e8" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated"><a class="ae kc" href="https://www.producthunt.com/posts/jspen-permanent-page-maker-codepen-like" rel="noopener ugc nofollow" target="_blank">https://www . product hunt . com/posts/jspen-permanent-page-maker-codepen-like</a></li><li id="b60d" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">黑客新闻</li><li id="e29f" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">独立黑客</li><li id="cf01" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">朋友和家人</li></ol><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es nl"><img src="../Images/e4089c3acdec8bda4754fbc2e6a2d2a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJPYnnhAAF6aaCWar-wLeg.png"/></div></div></figure><h1 id="5496" class="la lb hi bd lc ld le lf lg lh li lj lk io ll ip lm ir ln is lo iu lp iv lq lr bi translated">改进URL缩写程序</h1><p id="fdfd" class="pw-post-body-paragraph ix iy hi iz b ja ls ij jc jd lt im jf jg lu ji jj jk lv jm jn jo lw jq jr js hb bi translated">最初项目的一个最大缺点是缺乏一个好的URL缩短器，它有一个开放的API，可以用来缩短很长的URL。所以，我创建了我自己的，有一个非常，非常小的后端。</p><p id="745d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我想要一个可以存储长URL的东西，而不是其他东西，并且几乎不需要任何操作成本。</p><p id="13a5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以，我是这样设置的:</p><ol class=""><li id="794f" class="lx ly hi iz b ja jb jd je jg lz jk ma jo mb js nk md me mf bi translated">长URL将被存储在一个静态的BunnyCDN存储桶中(非常类似于AWS S3，但是加载更便宜)。<strong class="iz ml">每GB存储1美元</strong>，每TB传输5美元<strong class="iz ml"/>，尽管我会使用Cloudflare将这一数据减少到极少传输。</li><li id="8396" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">纯文本文件将只包含URL有效负载(因此它不能作为通用的URL缩写，只能用于URLPages)。</li><li id="d67e" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">纯文本文件将存储在其md5散列下，以防止重复调用(并简化存储脚本)。</li><li id="e394" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">md5散列将成为(相对)短的URL。所以用户只要点击<strong class="iz ml">jspen.co/s/#&lt;MD5 hash整页&gt; </strong>，就会直接从<strong class="iz ml"> cdn/ &lt; md5 &gt;的路径下载一个文件。t </strong> (BunnyCDN需要一个文件扩展名来启用CORS)</li><li id="4e68" class="lx ly hi iz b ja mg jd mh jg mi jk mj jo mk js nk md me mf bi translated">有了速率限制，我可以编写一个脚本，将文件存储在BunnyCDN上，只占用我的一个小型Dokku集群上的一小部分资源(不到5美元/月)</li></ol><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es nm"><img src="../Images/faedadef748fda70636b735c8b06ec86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NpzoxBdld9R3eU7ojM2ylw.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx">After setting up proper cache-control headers, CDNs, and creating immutable URLs, basically only the first request uses paid bandwidth, which should make this ridiculously cheap to operate.</figcaption></figure><p id="2f83" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是一个私人回购，但逻辑基本上是这样的，在Cloudflare端有一些速率限制:</p><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es kk"><img src="../Images/39debd60a49634a1da4c3dd263fd9774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wtWuyK3BTla8CCxNVTLgtQ.png"/></div></div></figure><h2 id="da78" class="nn lb hi bd lc no np nq lg nr ns nt lk jg nu nv lm jk nw nx lo jo ny nz lq oa bi translated">差不多就是这样！感谢阅读！</h2><figure class="kl km kn ko fd kp er es paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="er es ob"><img src="../Images/9c460f0fa6cd8f1f367714eada18be1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C6wdUeDIgHrGeA3_7DgMig.png"/></div></div><figcaption class="kw kx et er es ky kz bd b be z dx"><a class="ae kc" href="https://www.meetingroom365.com/" rel="noopener ugc nofollow" target="_blank">Meetingroom365.com</a> | <a class="ae kc" href="https://twitter.com/kidgdzilla" rel="noopener ugc nofollow" target="_blank">@kidgdzilla</a> (Twitter) | <a class="ae kc" href="https://indiehackers.com/futhey" rel="noopener ugc nofollow" target="_blank">@futhey</a> (IndieHackers) | <a class="ae kc" href="https://github.com/kidgodzilla" rel="noopener ugc nofollow" target="_blank">@kidgodzilla</a> (GitHub)</figcaption></figure></div></div>    
</body>
</html>